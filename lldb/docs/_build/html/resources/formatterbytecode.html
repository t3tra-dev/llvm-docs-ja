<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="DWARF Extensions" href="extensions.html" /><link rel="prev" title="Data Formatters" href="dataformatters.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.01.29 -->
        <title>Formatter Bytecode - üêõ LLDB</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f0f0f0;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">üêõ LLDB</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">üêõ LLDB</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Using LLDB</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../use/tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/map.html">GDB to LLDB command map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/formatting.html">Frame and Thread Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/variable.html">Variable Formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/symbolication.html">Symbolication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/symbols.html">Symbols on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/remote.html">Remote Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/intel_pt.html">Tracing with Intel Processor Trace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/ondemand.html">On Demand Symbols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/aarch64-linux.html">Using LLDB On AArch64 Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/symbolfilejson.html">JSON Symbol File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/mcp.html">Model Context Protocol (MCP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/links.html">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../man/lldb.html">Man Page</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Scripting LLDB</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../use/python.html">Python Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/python-reference.html">Python Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_extensions.html">Python Extensions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developing LLDB</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="qemu-testing.html">Testing LLDB using QEMU</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="fuzzing.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="sbapi.html">Scripting Bridge API</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataformatters.html">Data Formatters</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Formatter Bytecode</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">DWARF Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="lldbgdbremote.html">GDB Remote Protocol Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="lldbplatformpackets.html">LLDB Platform Packets</a></li>
<li class="toctree-l1"><a class="reference internal" href="caveats.html">Caveats</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Open Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="lldbdap.html">Contributing to LLDB-DAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="addinglanguagesupport.html">Adding Programming Language Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://lldb.llvm.org/cpp_reference/namespacelldb.html">Public C++ API</a></li>
<li class="toctree-l1"><a class="reference external" href="https://lldb.llvm.org/cpp_reference/index.html">Private C++ API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/releases">Releases</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.gg/xS7Z362">Join the Discord</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.com/channels/636084430946959380/636732809708306432">Discord Channel</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discourse.llvm.org/c/subprojects/lldb/8">Discussion Forums</a></li>
<li class="toctree-l1"><a class="reference external" href="https://llvm.org/docs/DeveloperPolicy.html">Developer Policy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/issues?q=is%3Aissue+label%3Alldb+is%3Aopen">Bug Reports</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/pulls?q=is%3Apr+label%3Alldb+is%3Aopen">Code Reviews</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/llvm/llvm-project/edit/main/lldb/docs/resources/formatterbytecode.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="formatter-bytecode">
<h1>Formatter Bytecode<a class="headerlink" href="#formatter-bytecode" title="Link to this heading">#</a></h1>
<section id="background">
<h2>Background<a class="headerlink" href="#background" title="Link to this heading">#</a></h2>
<p>LLDB provides rich customization options to display data types (see <a class="reference internal" href="../use/variable.html"><span class="doc">Variable Formatting</span></a>). To use custom data formatters, developers need to edit the global <code class="xref any docutils literal notranslate"><span class="pre">~/.lldbinit</span></code> file to make sure they are found and loaded. In addition to this rather manual workflow, developers or library authors can ship ship data formatters with their code in a format that allows LLDB automatically find them and run them securely.</p>
<p>An end-to-end example of such a workflow is the Swift <code class="xref any docutils literal notranslate"><span class="pre">DebugDescription</span></code> macro (see <a class="reference external" href="https://www.swift.org/blog/announcing-swift-6/#debugging">https://www.swift.org/blog/announcing-swift-6/#debugging</a> ) that translates Swift string interpolation into LLDB summary strings, and puts them into a <code class="xref any docutils literal notranslate"><span class="pre">.lldbsummaries</span></code> section, where LLDB can find them.</p>
<p>This document describes a minimal bytecode tailored to running LLDB formatters. It defines a human-readable assembler representation for the language, an efficient binary encoding, a virtual machine for evaluating it, and format for embedding formatters into binary containers.</p>
<section id="goals">
<h3>Goals<a class="headerlink" href="#goals" title="Link to this heading">#</a></h3>
<p>Provide an efficient and secure encoding for data formatters that can be used as a compilation target from user-friendly representations (such as DIL, Swift DebugDescription, or NatVis).</p>
</section>
<section id="non-goals">
<h3>Non-goals<a class="headerlink" href="#non-goals" title="Link to this heading">#</a></h3>
<p>While humans could write the assembler syntax, making it user-friendly is not a goal. It is meant to be used as a compilation target for higher-level, language-specific affordances.</p>
</section>
</section>
<section id="design-of-the-virtual-machine">
<h2>Design of the virtual machine<a class="headerlink" href="#design-of-the-virtual-machine" title="Link to this heading">#</a></h2>
<p>The LLDB formatter virtual machine uses a stack-based bytecode, comparable with DWARF expressions, but with higher-level data types and functions.</p>
<p>The virtual machine has two stacks, a data and a control stack. The control stack is kept separate to make it easier to reason about the security aspects of the virtual machine.</p>
<section id="data-types">
<h3>Data types<a class="headerlink" href="#data-types" title="Link to this heading">#</a></h3>
<p>All objects on the data stack must have one of the following data types. These data types are ‚Äúhost‚Äù data types, in LLDB parlance.</p>
<ul class="simple">
<li><p><em>String</em> (UTF-8)</p></li>
<li><p><em>Int</em> (64 bit)</p></li>
<li><p><em>UInt</em> (64 bit)</p></li>
<li><p><em>Object</em> (Basically an <code class="xref any docutils literal notranslate"><span class="pre">SBValue</span></code>)</p></li>
<li><p><em>Type</em> (Basically an <code class="xref any docutils literal notranslate"><span class="pre">SBType</span></code>)</p></li>
<li><p><em>Selector</em> (One of the predefine functions)</p></li>
</ul>
<p><em>Object</em> and <em>Type</em> are opaque, they can only be used as a parameters of <code class="xref any docutils literal notranslate"><span class="pre">call</span></code>.</p>
</section>
</section>
<section id="instruction-set">
<h2>Instruction set<a class="headerlink" href="#instruction-set" title="Link to this heading">#</a></h2>
<section id="stack-operations">
<h3>Stack operations<a class="headerlink" href="#stack-operations" title="Link to this heading">#</a></h3>
<p>These instructions manipulate the data stack directly.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Opcode</p></td>
<td><p>Mnemonic</p></td>
<td><p>Stack effect</p></td>
</tr>
<tr class="row-even"><td><p>0x00</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">dup</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(x</span> <span class="pre">-&gt;</span> <span class="pre">x</span> <span class="pre">x)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x01</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">drop</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(x</span> <span class="pre">y</span> <span class="pre">-&gt;</span> <span class="pre">x)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x02</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">pick</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(x</span> <span class="pre">...</span> <span class="pre">UInt</span> <span class="pre">-&gt;</span> <span class="pre">x</span> <span class="pre">...</span> <span class="pre">x)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x03</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">over</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(x</span> <span class="pre">y</span> <span class="pre">-&gt;</span> <span class="pre">x</span> <span class="pre">y</span> <span class="pre">x)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x04</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">swap</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(x</span> <span class="pre">y</span> <span class="pre">-&gt;</span> <span class="pre">y</span> <span class="pre">x)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x05</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">rot</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(x</span> <span class="pre">y</span> <span class="pre">z</span> <span class="pre">-&gt;</span> <span class="pre">z</span> <span class="pre">x</span> <span class="pre">y)</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="control-flow">
<h3>Control flow<a class="headerlink" href="#control-flow" title="Link to this heading">#</a></h3>
<p>These manipulate the control stack and program counter. Both <code class="xref any docutils literal notranslate"><span class="pre">if</span></code> and <code class="xref any docutils literal notranslate"><span class="pre">ifelse</span></code> expect a <code class="xref any docutils literal notranslate"><span class="pre">UInt</span></code> at the top of the data stack to represent the condition.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Opcode</p></td>
<td><p>Mnemonic</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0x10</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">{</span></code></p></td>
<td><p>push a code block address onto the control stack</p></td>
</tr>
<tr class="row-odd"><td><p>‚Äì</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">}</span></code></p></td>
<td><p>(technically not an opcode) syntax for end of code block</p></td>
</tr>
<tr class="row-even"><td><p>0x11</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">if</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(UInt</span> <span class="pre">-&gt;</span> <span class="pre">)</span></code> pop a block from the control stack,
if the top of the data stack is nonzero, execute it</p></td>
</tr>
<tr class="row-odd"><td><p>0x12</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">ifelse</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(UInt</span> <span class="pre">-&gt;</span> <span class="pre">)</span></code> pop two blocks from the control stack, if
the top of the data stack is nonzero, execute the first,
otherwise the second.</p></td>
</tr>
<tr class="row-even"><td><p>0x13</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">return</span></code></p></td>
<td><p>pop the entire control stack and return</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="literals-for-basic-types">
<h3>Literals for basic types<a class="headerlink" href="#literals-for-basic-types" title="Link to this heading">#</a></h3>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Opcode</p></td>
<td><p>Mnemonic</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0x20</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">123u</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(</span> <span class="pre">-&gt;</span> <span class="pre">UInt)</span></code> push an unsigned 64-bit host integer</p></td>
</tr>
<tr class="row-odd"><td><p>0x21</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">123</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(</span> <span class="pre">-&gt;</span> <span class="pre">Int)</span></code> push a signed 64-bit host integer</p></td>
</tr>
<tr class="row-even"><td><p>0x22</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&quot;abc&quot;</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(</span> <span class="pre">-&gt;</span> <span class="pre">String)</span></code> push a UTF-8 host string</p></td>
</tr>
<tr class="row-odd"><td><p>0x23</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&#64;strlen</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(</span> <span class="pre">-&gt;</span> <span class="pre">Selector)</span></code> push one of the predefined function
selectors. See <code class="xref any docutils literal notranslate"><span class="pre">call</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="conversion-operations">
<h3>Conversion operations<a class="headerlink" href="#conversion-operations" title="Link to this heading">#</a></h3>
</section>
<section id="arithmetic-logic-and-comparison-operations">
<h3>Arithmetic, logic, and comparison operations<a class="headerlink" href="#arithmetic-logic-and-comparison-operations" title="Link to this heading">#</a></h3>
<p>All of these operations are only defined for <code class="xref any docutils literal notranslate"><span class="pre">Int</span></code> and <code class="xref any docutils literal notranslate"><span class="pre">UInt</span></code> and both operands need to be of the same type. The <code class="xref any docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> operator is an arithmetic shift if the parameters are of type <code class="xref any docutils literal notranslate"><span class="pre">Int</span></code>, otherwise it‚Äôs a logical shift to the right.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Opcode</p></td>
<td><p>Mnemonic</p></td>
<td><p>Stack effect</p></td>
</tr>
<tr class="row-even"><td><p>0x30</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(x</span> <span class="pre">y</span> <span class="pre">-&gt;</span> <span class="pre">[x+y])</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x31</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td><p>etc ‚Ä¶</p></td>
</tr>
<tr class="row-even"><td><p>0x32</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x33</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">/</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x34</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">%</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x35</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&lt;&lt;</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x36</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&gt;&gt;</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x40</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">~</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x41</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">|</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x42</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">^</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x50</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">=</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x51</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">=</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x52</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&lt;</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x53</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&gt;</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x54</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">=&lt;</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x55</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&gt;=</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="function-calls">
<h3>Function calls<a class="headerlink" href="#function-calls" title="Link to this heading">#</a></h3>
<p>For security reasons the list of functions callable with <code class="xref any docutils literal notranslate"><span class="pre">call</span></code> is predefined. The supported functions are either existing methods on <code class="xref any docutils literal notranslate"><span class="pre">SBValue</span></code>, or string formatting operations.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Opcode</p></td>
<td><p>Mnemonic</p></td>
<td><p>Stack effect</p></td>
</tr>
<tr class="row-even"><td><p>0x60</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">call</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">argN</span> <span class="pre">...</span> <span class="pre">arg0</span> <span class="pre">Selector</span> <span class="pre">-&gt;</span> <span class="pre">retval)</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Method is one of a predefined set of <em>Selectors</em>.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Sel.</p></td>
<td><p>Mnemonic</p></td>
<td><p>Stack Effect</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0x00</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">summary</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">&#64;summary</span> <span class="pre">-&gt;</span> <span class="pre">String)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::GetSummary</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x01</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">type_summary</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">&#64;type_summary</span> <span class="pre">-&gt;</span> <span class="pre">String)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::GetTypeSummary</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x10</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">get_num_children</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">&#64;get_num_children</span> <span class="pre">-&gt;</span> <span class="pre">UInt)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::GetNumChildren</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x11</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">get_child_at_index</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">UInt</span> <span class="pre">&#64;get_child_at_index</span> <span class="pre">-&gt;</span> <span class="pre">Object)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::GetChildAtIndex</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x12</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">get_child_with_name</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">String</span> <span class="pre">&#64;get_child_with_name</span> <span class="pre">-&gt;</span> <span class="pre">Object)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::GetChildAtIndex</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x13</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">get_child_index</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">String</span> <span class="pre">&#64;get_child_index</span> <span class="pre">-&gt;</span> <span class="pre">UInt)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::GetChildIndex</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x15</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">get_type</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">&#64;get_type</span> <span class="pre">-&gt;</span> <span class="pre">Type)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::GetType</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x16</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">get_template_argument_type</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">UInt</span> <span class="pre">&#64;get_template_argument_type</span> <span class="pre">-&gt;</span> <span class="pre">Type)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::GetTemplateArgumentType</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x17</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">cast</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">Type</span> <span class="pre">&#64;cast</span> <span class="pre">-&gt;</span> <span class="pre">Object)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::Cast</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x20</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">get_value</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">&#64;get_value</span> <span class="pre">-&gt;</span> <span class="pre">Object)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::GetValue</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x21</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">get_value_as_unsigned</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">&#64;get_value_as_unsigned</span> <span class="pre">-&gt;</span> <span class="pre">UInt)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::GetValueAsUnsigned</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x22</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">get_value_as_signed</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">&#64;get_value_as_signed</span> <span class="pre">-&gt;</span> <span class="pre">Int)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::GetValueAsSigned</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x23</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">get_value_as_address</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">&#64;get_value_as_address</span> <span class="pre">-&gt;</span> <span class="pre">UInt)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">SBValue::GetValueAsAddress</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x40</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">read_memory_byte</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(UInt</span> <span class="pre">&#64;read_memory_byte</span> <span class="pre">-&gt;</span> <span class="pre">UInt)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">Target::ReadMemory</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x41</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">read_memory_uint32</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(UInt</span> <span class="pre">&#64;read_memory_uint32</span> <span class="pre">-&gt;</span> <span class="pre">UInt)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">Target::ReadMemory</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x42</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">read_memory_int32</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(UInt</span> <span class="pre">&#64;read_memory_int32</span> <span class="pre">-&gt;</span> <span class="pre">Int)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">Target::ReadMemory</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x43</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">read_memory_uint64</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(UInt</span> <span class="pre">&#64;read_memory_uint64</span> <span class="pre">-&gt;</span> <span class="pre">UInt)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">Target::ReadMemory</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x44</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">read_memory_int64</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(UInt</span> <span class="pre">&#64;read_memory_int64</span> <span class="pre">-&gt;</span> <span class="pre">Int)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">Target::ReadMemory</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x45</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">read_memory_address</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(UInt</span> <span class="pre">&#64;read_memory_uint64</span> <span class="pre">-&gt;</span> <span class="pre">UInt)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">Target::ReadMemory</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x46</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">read_memory</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(UInt</span> <span class="pre">Type</span> <span class="pre">&#64;read_memory</span> <span class="pre">-&gt;</span> <span class="pre">Object)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">Target::ReadMemory</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x50</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">fmt</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(String</span> <span class="pre">arg0</span> <span class="pre">...</span> <span class="pre">&#64;fmt</span> <span class="pre">-&gt;</span> <span class="pre">String)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">llvm::format</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x51</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">sprintf</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(String</span> <span class="pre">arg0</span> <span class="pre">...</span> <span class="pre">sprintf</span> <span class="pre">-&gt;</span> <span class="pre">String)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">sprintf</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x52</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">strlen</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(String</span> <span class="pre">strlen</span> <span class="pre">-&gt;</span> <span class="pre">String)</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">strlen</span> <span class="pre">in</span> <span class="pre">bytes</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="byte-code">
<h3>Byte Code<a class="headerlink" href="#byte-code" title="Link to this heading">#</a></h3>
<p>Most instructions are just a single byte opcode. The only exceptions are the literals:</p>
<ul class="simple">
<li><p><em>String</em>: Length in bytes encoded as ULEB128, followed length bytes</p></li>
<li><p><em>Int</em>: LEB128</p></li>
<li><p><em>UInt</em>: ULEB128</p></li>
<li><p><em>Selector</em>: ULEB128</p></li>
</ul>
</section>
<section id="embedding">
<h3>Embedding<a class="headerlink" href="#embedding" title="Link to this heading">#</a></h3>
<p>Expression programs are embedded into an <code class="xref any docutils literal notranslate"><span class="pre">.lldbformatters</span></code> section (an evolution of the Swift <code class="xref any docutils literal notranslate"><span class="pre">.lldbsummaries</span></code> section) that is a dictionary of type names/regexes and descriptions. It consists of a list of records. Each record starts with the following header:</p>
<ul class="simple">
<li><p>Version number (ULEB128)</p></li>
<li><p>Remaining size of the record (minus the header) (ULEB128)</p></li>
</ul>
<p>The version number is increased whenever an incompatible change is made. Adding new opcodes or selectors is not an incompatible change since consumers can unambiguously detect this and report an error.</p>
<p>Space between two records may be padded with NULL bytes.</p>
<p>In version 1, a record consists of a dictionary key, which is a type name or regex.</p>
<ul class="simple">
<li><p>Length of the key in bytes (ULEB128)</p></li>
<li><p>The key (UTF-8)</p></li>
</ul>
<p>A regex has to start with <code class="xref any docutils literal notranslate"><span class="pre">^</span></code>, which is part of the regular expression.</p>
<p>After this comes a flag bitfield, which is a ULEB-encoded <code class="xref any docutils literal notranslate"><span class="pre">lldb::TypeOptions</span></code> bitfield.</p>
<ul class="simple">
<li><p>Flags (ULEB128)</p></li>
</ul>
<p>This is followed by one or more dictionary values that immediately follow each other and entirely fill out the record size from the header. Each expression program has the following layout:</p>
<ul class="simple">
<li><p>Function signature (1 byte)</p></li>
<li><p>Length of the program (ULEB128)</p></li>
<li><p>The program bytecode</p></li>
</ul>
<p>The possible function signatures are:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Signature</p></td>
<td><p>Mnemonic</p></td>
<td><p>Stack Effect</p></td>
</tr>
<tr class="row-even"><td><p>0x00</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&#64;summary</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">-&gt;</span> <span class="pre">String)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x01</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&#64;init</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object</span> <span class="pre">-&gt;</span> <span class="pre">Object+)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x02</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&#64;get_num_children</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object+</span> <span class="pre">-&gt;</span> <span class="pre">UInt)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x03</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&#64;get_child_index</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object+</span> <span class="pre">String</span> <span class="pre">-&gt;</span> <span class="pre">UInt)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x04</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&#64;get_child_at_index</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object+</span> <span class="pre">UInt</span> <span class="pre">-&gt;</span> <span class="pre">Object)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x05</p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">&#64;get_value</span></code></p></td>
<td><p><code class="xref any docutils literal notranslate"><span class="pre">(Object+</span> <span class="pre">-&gt;</span> <span class="pre">String)</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>If not specified, the init function defaults to an empty function that just passes the Object along. Its results may be cached and allow common prep work to be done for an Object that can be reused by subsequent calls to the other methods. This way subsequent calls to <code class="xref any docutils literal notranslate"><span class="pre">&#64;get_child_at_index</span></code> can avoid recomputing shared information, for example.</p>
<p>While it is more efficient to store multiple programs per type key, this is not a requirement. LLDB will merge all entries. If there are conflicts the result is undefined.</p>
</section>
<section id="execution-model">
<h3>Execution model<a class="headerlink" href="#execution-model" title="Link to this heading">#</a></h3>
<p>Execution begins at the first byte in the program. The program counter of the virtual machine starts at offset 0 of the bytecode and may never move outside the range of the program as defined in the header. The data stack starts with one Object or the result of the <code class="xref any docutils literal notranslate"><span class="pre">&#64;init</span></code> function (<code class="xref any docutils literal notranslate"><span class="pre">Object+</span></code> in the table above).</p>
</section>
<section id="error-handling">
<h3>Error handling<a class="headerlink" href="#error-handling" title="Link to this heading">#</a></h3>
<p>In version 1 errors are unrecoverable, the entire expression will fail if any kind of error is encountered.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="extensions.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">DWARF Extensions</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="dataformatters.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Data Formatters</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2007-2025, The LLDB Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Aug 13, 2025</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Formatter Bytecode</a><ul>
<li><a class="reference internal" href="#background">Background</a><ul>
<li><a class="reference internal" href="#goals">Goals</a></li>
<li><a class="reference internal" href="#non-goals">Non-goals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#design-of-the-virtual-machine">Design of the virtual machine</a><ul>
<li><a class="reference internal" href="#data-types">Data types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#instruction-set">Instruction set</a><ul>
<li><a class="reference internal" href="#stack-operations">Stack operations</a></li>
<li><a class="reference internal" href="#control-flow">Control flow</a></li>
<li><a class="reference internal" href="#literals-for-basic-types">Literals for basic types</a></li>
<li><a class="reference internal" href="#conversion-operations">Conversion operations</a></li>
<li><a class="reference internal" href="#arithmetic-logic-and-comparison-operations">Arithmetic, logic, and comparison operations</a></li>
<li><a class="reference internal" href="#function-calls">Function calls</a></li>
<li><a class="reference internal" href="#byte-code">Byte Code</a></li>
<li><a class="reference internal" href="#embedding">Embedding</a></li>
<li><a class="reference internal" href="#execution-model">Execution model</a></li>
<li><a class="reference internal" href="#error-handling">Error handling</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=7f41d439"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    </body>
</html>