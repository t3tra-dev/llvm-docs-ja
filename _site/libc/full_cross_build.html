<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Full Cross Build &#8212; The LLVM C Library</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=2e637bd6" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Overlay Mode" href="overlay_mode.html" />
    <link rel="prev" title="Full Host Build" href="full_host_build.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="full-cross-build">
<span id="id1"></span><h1>Full Cross Build<a class="headerlink" href="#full-cross-build" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#standalone-cross-build" id="id4">Standalone cross build</a></p></li>
<li><p><a class="reference internal" href="#bootstrap-cross-build" id="id5">Bootstrap cross build</a></p></li>
<li><p><a class="reference internal" href="#building-for-bare-metal" id="id6">Building for bare metal</a></p></li>
<li><p><a class="reference internal" href="#building-for-the-gpu" id="id7">Building for the GPU</a></p></li>
</ul>
</nav>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Fullbuild requires running headergen, which is a python program that depends on
pyyaml. The minimum versions are listed on the <a class="reference internal" href="dev/header_generation.html#header-generation"><span class="std std-ref">Generating Public and Internal headers</span></a>
page, as well as additional information.</p>
</div>
<p>In this document, we will present recipes to cross build the full libc. When we
say <em>cross build</em> a full libc, we mean that we will build the full libc for a
target system which is not the same as the system on which the libc is being
built. For example, you could be building for a bare metal aarch64 <em>target</em> on a
Linux x86_64 <em>host</em>.</p>
<p>There are two main recipes to cross build the full libc. Each one serves a
different use case. Below is a short description of these recipes to help users
pick the recipe that best suites their needs and contexts.</p>
<ul class="simple">
<li><p><strong>Standalone cross build</strong> - Using this recipe one can build the libc using a
compiler of their choice. One should use this recipe if their compiler can
build for the host as well as the target.</p></li>
<li><p><strong>Bootstrap cross build</strong> - In this recipe, one will build the <code class="docutils literal notranslate"><span class="pre">clang</span></code>
compiler and the libc build tools for the host first, and then use them to
build the libc for the target. Unlike with the standalone build recipe, the
user does not have explicitly build <code class="docutils literal notranslate"><span class="pre">clang</span></code> and other build tools.
They get built automatically before building the libc. One should use this
recipe if they intend use the built <code class="docutils literal notranslate"><span class="pre">clang</span></code> and the libc as part of their
toolchain for the target.</p></li>
</ul>
<p>The following sections present the two recipes in detail.</p>
<section id="standalone-cross-build">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Standalone cross build</a><a class="headerlink" href="#standalone-cross-build" title="Link to this heading">¶</a></h2>
<p>In the <em>standalone crossbuild</em> recipe, the system compiler or a custom compiler
of user’s choice is used to build the libc. The necessary build tools for the
host are built first, and those build tools are then used to build the libc for
the target. Both these steps happen automatically, as in, the user does not have
to explicitly build the build tools first and then build the libc. A point to
keep in mind is that the compiler used should be capable of building for the
host as well as the target.</p>
<section id="cmake-configure-step">
<h3>CMake configure step<a class="headerlink" href="#cmake-configure-step" title="Link to this heading">¶</a></h3>
<p>Below is the CMake command to configure the standalone crossbuild of the libc.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>llvm-project<span class="w">  </span><span class="c1"># The llvm-project checkout</span>
$&gt;<span class="w"> </span>mkdir<span class="w"> </span>build
$&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
$&gt;<span class="w"> </span><span class="nv">C_COMPILER</span><span class="o">=</span>&lt;C<span class="w"> </span>compiler&gt;<span class="w"> </span><span class="c1"># For example &quot;clang&quot;</span>
$&gt;<span class="w"> </span><span class="nv">CXX_COMPILER</span><span class="o">=</span>&lt;C++<span class="w"> </span>compiler&gt;<span class="w"> </span><span class="c1"># For example &quot;clang++&quot;</span>
$&gt;<span class="w"> </span>cmake<span class="w"> </span>../runtimes<span class="w">  </span><span class="se">\</span>
<span class="w">   </span>-G<span class="w"> </span>Ninja<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DLLVM_ENABLE_RUNTIMES<span class="o">=</span>libc<span class="w">  </span><span class="se">\</span>
<span class="w">   </span>-DCMAKE_C_COMPILER<span class="o">=</span><span class="nv">$C_COMPILER</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DCMAKE_CXX_COMPILER<span class="o">=</span><span class="nv">$CXX_COMPILER</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DLLVM_LIBC_FULL_BUILD<span class="o">=</span>ON<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DLIBC_TARGET_TRIPLE<span class="o">=</span>&lt;Your<span class="w"> </span>target<span class="w"> </span>triple&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>&lt;Release<span class="p">|</span>Debug&gt;
</pre></div>
</div>
<p>We will go over the special options passed to the <code class="docutils literal notranslate"><span class="pre">cmake</span></code> command above.</p>
<ul class="simple">
<li><p><strong>Enabled Runtimes</strong> - Since we want to build LLVM-libc, we list
<code class="docutils literal notranslate"><span class="pre">libc</span></code> as the enabled runtime.</p></li>
<li><p><strong>The full build option</strong> - Since we want to build the full libc, we pass
<code class="docutils literal notranslate"><span class="pre">-DLLVM_LIBC_FULL_BUILD=ON</span></code>.</p></li>
<li><p><strong>The target triple</strong> - This is the target triple of the target for which
we are building the libc. For example, for a Linux 32-bit Arm target,
one can specify it as <code class="docutils literal notranslate"><span class="pre">arm-linux-eabi</span></code>.</p></li>
</ul>
</section>
<section id="build-step">
<h3>Build step<a class="headerlink" href="#build-step" title="Link to this heading">¶</a></h3>
<p>After configuring the build with the above <code class="docutils literal notranslate"><span class="pre">cmake</span></code> command, one can build the
the libc for the target with the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$&gt;<span class="w"> </span>ninja<span class="w"> </span>libc<span class="w"> </span>libm
</pre></div>
</div>
<p>The above <code class="docutils literal notranslate"><span class="pre">ninja</span></code> command will build the libc static archives <code class="docutils literal notranslate"><span class="pre">libc.a</span></code> and
<code class="docutils literal notranslate"><span class="pre">libm.a</span></code> for the target specified with <code class="docutils literal notranslate"><span class="pre">-DLIBC_TARGET_TRIPLE</span></code> in the CMake
configure step.</p>
</section>
</section>
<section id="bootstrap-cross-build">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Bootstrap cross build</a><a class="headerlink" href="#bootstrap-cross-build" title="Link to this heading">¶</a></h2>
<p>In this recipe, the clang compiler is built automatically before building
the libc for the target.</p>
<section id="id2">
<h3>CMake configure step<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>llvm-project<span class="w">  </span><span class="c1"># The llvm-project checkout</span>
$&gt;<span class="w"> </span>mkdir<span class="w"> </span>build
$&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
$&gt;<span class="w"> </span><span class="nv">C_COMPILER</span><span class="o">=</span>&lt;C<span class="w"> </span>compiler&gt;<span class="w"> </span><span class="c1"># For example &quot;clang&quot;</span>
$&gt;<span class="w"> </span><span class="nv">CXX_COMPILER</span><span class="o">=</span>&lt;C++<span class="w"> </span>compiler&gt;<span class="w"> </span><span class="c1"># For example &quot;clang++&quot;</span>
$&gt;<span class="w"> </span><span class="nv">TARGET_TRIPLE</span><span class="o">=</span>&lt;Your<span class="w"> </span>target<span class="w"> </span>triple&gt;
$&gt;<span class="w"> </span>cmake<span class="w"> </span>../llvm<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-G<span class="w"> </span>Ninja<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DCMAKE_C_COMPILER<span class="o">=</span><span class="nv">$C_COMPILER</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DCMAKE_CXX_COMPILER<span class="o">=</span><span class="nv">$CXX_COMPILER</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DLLVM_ENABLE_PROJECTS<span class="o">=</span>clang<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DLLVM_ENABLE_RUNTIMES<span class="o">=</span>libc<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DLLVM_LIBC_FULL_BUILD<span class="o">=</span>ON<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DLLVM_RUNTIME_TARGETS<span class="o">=</span><span class="nv">$TARGET_TRIPLE</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Debug
</pre></div>
</div>
<p>Note how the above cmake command differs from the one used in the other recipe:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">clang</span></code> is listed in <code class="docutils literal notranslate"><span class="pre">-DLLVM_ENABLE_PROJECTS</span></code> and <code class="docutils literal notranslate"><span class="pre">libc</span></code> is
listed in <code class="docutils literal notranslate"><span class="pre">-DLLVM_ENABLE_RUNTIMES</span></code>.</p></li>
<li><p>The CMake root source directory is <code class="docutils literal notranslate"><span class="pre">llvm-project/llvm</span></code>.</p></li>
<li><p>The target triple is specified with <code class="docutils literal notranslate"><span class="pre">-DLLVM_RUNTIME_TARGETS</span></code>.</p></li>
</ul>
</section>
<section id="id3">
<h3>Build step<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<p>The build step is similar to the other recipe:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$&gt;<span class="w"> </span>ninja<span class="w"> </span>libc
</pre></div>
</div>
<p>The above ninja command should build the libc static archives for the target
specified with <code class="docutils literal notranslate"><span class="pre">-DLLVM_RUNTIME_TARGETS</span></code>.</p>
</section>
</section>
<section id="building-for-bare-metal">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Building for bare metal</a><a class="headerlink" href="#building-for-bare-metal" title="Link to this heading">¶</a></h2>
<p>To build for bare metal, all one has to do is to specify the
<a class="reference external" href="https://clang.llvm.org/docs/CrossCompilation.html#target-triple">system</a>
component of the target triple as <code class="docutils literal notranslate"><span class="pre">none</span></code>. For example, to build for a
32-bit arm target on bare metal, one can use a target triple like
<code class="docutils literal notranslate"><span class="pre">arm-none-eabi</span></code>. Other than that, the libc for a bare metal target can be
built using any of the three recipes described above.</p>
</section>
<section id="building-for-the-gpu">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Building for the GPU</a><a class="headerlink" href="#building-for-the-gpu" title="Link to this heading">¶</a></h2>
<p>To build for a GPU architecture, it should only be necessary to specify the
target triple as one of the supported GPU targets. Currently, this is either
<code class="docutils literal notranslate"><span class="pre">nvptx64-nvidia-cuda</span></code> for NVIDIA GPUs or <code class="docutils literal notranslate"><span class="pre">amdgcn-amd-amdhsa</span></code> for AMD GPUs.
More detailed information is provided in the <a class="reference internal" href="gpu/building.html#libc-gpu-building"><span class="std std-ref">GPU
documentation</span></a>.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">libc</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Status &amp; Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="headers/index.html">Implementation Status</a></li>
<li class="toctree-l1"><a class="reference internal" href="arch_support.html">Architecture Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="platform_support.html">Platform Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler_support.html">Compiler Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Simple Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="full_host_build.html">Full Host Build</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Full Cross Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="overlay_mode.html">Overlay Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu/index.html">libc for GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="uefi/index.html">libc for UEFI</a></li>
<li class="toctree-l1"><a class="reference internal" href="configure.html">Configure Options</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Maintainers.html">LLVM-libc Maintainers</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_and_test.html">Building and Testing the libc</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/index.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="porting.html">Bringup on a New OS or Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to the libc Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Useful Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="talks.html">Talks</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/labels/libc">Bug Reports</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discourse.llvm.org/c/runtimes/libc">Discourse</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.gg/xS7Z362">Join the Discord</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.com/channels/636084430946959380/636732994891284500">Discord Channel</a></li>
<li class="toctree-l1"><a class="reference external" href="https://lab.llvm.org/buildbot/#/builders?tags=libc">Buildbot</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="full_host_build.html" title="previous chapter">Full Host Build</a></li>
      <li>Next: <a href="overlay_mode.html" title="next chapter">Overlay Mode</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2011-2025, LLVM Project.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/full_cross_build.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>