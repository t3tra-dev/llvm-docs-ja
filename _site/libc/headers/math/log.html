<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Log/Log10/Log2 Algorithm &#8212; The LLVM C Library</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=2e637bd6" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="search.h" href="../search.html" />
    <link rel="prev" title="math.h" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="log-log10-log2-algorithm">
<span id="log-algorithm"></span><h1>Log/Log10/Log2 Algorithm<a class="headerlink" href="#log-log10-log2-algorithm" title="Link to this heading">¶</a></h1>
<p>In this short note, we will discuss in detail about the computation of
<span class="math notranslate nohighlight">\(\log(x)\)</span> function, with double precision inputs, in particular, the range
reduction steps and error analysis.  The algorithm is broken down into 2 main
phases as follow:</p>
<ol class="arabic simple">
<li><p>Fast phase:</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>Range reduction</p></li>
<li><p>Polynomial approximation</p></li>
<li><p>Ziv’s test</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Accurate phase (if Ziv’s test failed):</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>Further range reduction</p></li>
<li><p>Polynomial approximation</p></li>
</ol>
</div></blockquote>
<section id="fast-phase">
<h2>Fast phase<a class="headerlink" href="#fast-phase" title="Link to this heading">¶</a></h2>
<section id="range-reduction">
<h3>Range reduction<a class="headerlink" href="#range-reduction" title="Link to this heading">¶</a></h3>
<p>Let <span class="math notranslate nohighlight">\(x = 2^{e_x} (1 + m_x)\)</span> be a normalized double precision number, in which
<span class="math notranslate nohighlight">\(-1074 \leq e_x \leq 1022\)</span> and <span class="math notranslate nohighlight">\(0 \leq m_x &lt; 1\)</span> such that
<span class="math notranslate nohighlight">\(2^{52} m_x \in \mathbb{Z}\)</span>.</p>
<p>Then from the properties of logarithm:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\log(x) &amp;= \log\left( 2^{e_x} (1 + m_x) \right) \\
        &amp;= \log\left( 2^{e_x} \right) + \log(1 + m_x) \\
        &amp;= e_x \log(2) + \log(1 + m_x)\end{split}\]</div>
<p>the computation of <span class="math notranslate nohighlight">\(\log(x)\)</span> can be reduced to:</p>
<ol class="arabic simple">
<li><p>compute the product of <span class="math notranslate nohighlight">\(e_x\)</span> and <span class="math notranslate nohighlight">\(\log(2)\)</span>,</p></li>
<li><p>compute <span class="math notranslate nohighlight">\(\log(1 + m_x)\)</span> for <span class="math notranslate nohighlight">\(0 \leq m_x &lt; 1\)</span>,</p></li>
<li><p>add step 1 and 2.</p></li>
</ol>
<p>To compute <span class="math notranslate nohighlight">\(\log(1 + m_x)\)</span> in step 2, we can reduce the range further by finding
<span class="math notranslate nohighlight">\(r &gt; 0\)</span> such that:</p>
<div class="math notranslate nohighlight">
\[| r(1 + m_x) - 1 | &lt; C \quad \quad \text{(R1)}\]</div>
<p>for small <span class="math notranslate nohighlight">\(0 &lt; C &lt; 1\)</span>.  Then if we let <span class="math notranslate nohighlight">\(u = r(1 + m_x) - 1\)</span>, <span class="math notranslate nohighlight">\(|u| &lt; C\)</span>:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\log(1 + m_x) &amp;= \log \left( \frac{r (1 + m_x)}{r} \right) \\
              &amp;= \log(r (1 + m_x) ) - \log(r) \\
              &amp;= \log(1 + u) - \log(r)\end{split}\]</div>
<p>and step 2 can be computed with:</p>
<ol class="loweralpha simple">
<li><p>extract <span class="math notranslate nohighlight">\(r\)</span> and <span class="math notranslate nohighlight">\(-\log(r)\)</span> from look-up tables,</p></li>
<li><p>compute the reduced argument <span class="math notranslate nohighlight">\(u = r(1 + m_x) - 1\)</span>,</p></li>
<li><p>compute <span class="math notranslate nohighlight">\(\log(1 + u)\)</span> by polynomial approximation or further range reduction,</p></li>
<li><p>add step a and step c results.</p></li>
</ol>
</section>
<section id="how-to-derive-r">
<h3>How to derive <span class="math notranslate nohighlight">\(r\)</span><a class="headerlink" href="#how-to-derive-r" title="Link to this heading">¶</a></h3>
<p>For an efficient implementation, we would like to use the first <span class="math notranslate nohighlight">\(M\)</span> significant
bits of <span class="math notranslate nohighlight">\(m_x\)</span> to look up for <span class="math notranslate nohighlight">\(r\)</span>.  In particular, we would like to find a value
of <span class="math notranslate nohighlight">\(r\)</span> that works for all <span class="math notranslate nohighlight">\(m_x\)</span> satisfying:</p>
<div class="math notranslate nohighlight">
\[k 2^{-M} \leq m_x &lt; (k + 1) 2^{-M} \quad \text{for some} \quad
k = 0..2^{M} - 1. \quad\quad \text{(M1)}\]</div>
<p>Let <span class="math notranslate nohighlight">\(r = 1 + s\)</span>, then <span class="math notranslate nohighlight">\(u\)</span> can be expressed in terms of <span class="math notranslate nohighlight">\(s\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}u &amp;= r(1 + m_x) - 1 \\
  &amp;= (1 + s)(1 + m_x) - 1 \\
  &amp;= s m_x + s + m_x  &amp;\quad\quad \text{(U1)} \\
  &amp;= s (1 + m_x) + m_x \\
  &amp;= m_x (1 + s) + s.\end{split}\]</div>
<p>From the condition <span class="math notranslate nohighlight">\(\text{(R1)}\)</span>, <span class="math notranslate nohighlight">\(s\)</span> is bounded by:</p>
<div class="math notranslate nohighlight">
\[\frac{-C - m_x}{1 + m_x} &lt; s &lt; \frac{C - m_x}{1 + m_x} \quad\quad \text{(S1)}.\]</div>
<p>Since our reduction constant <span class="math notranslate nohighlight">\(s\)</span> must work for all <span class="math notranslate nohighlight">\(m_x\)</span> in the interval
<span class="math notranslate nohighlight">\(I = \{ v: k 2^{-M} \leq v &lt; (k + 1) 2^{-M} \}\)</span>, <span class="math notranslate nohighlight">\(s\)</span> is bounded by:</p>
<div class="math notranslate nohighlight">
\[\sup_{v \in I} \frac{-C - v}{1 + v} &lt; s &lt; \inf_{v \in I} \frac{C - v}{1 + v}\]</div>
<p>For a fixed constant <span class="math notranslate nohighlight">\(|c| &lt; 1\)</span>, let <span class="math notranslate nohighlight">\(f(v) = \frac{c - v}{1 + v}\)</span>, then its
derivative is:</p>
<div class="math notranslate nohighlight">
\[f'(v) = \frac{(-1)(1 + v) - (1)(c - v)}{(1 + v)^2} = \frac{-1 - c}{(1 + v)^2}.\]</div>
<p>Since <span class="math notranslate nohighlight">\(|c| &lt; 1\)</span>, <span class="math notranslate nohighlight">\(f'(v) &lt; 0\)</span> for all <span class="math notranslate nohighlight">\(v \neq -1\)</span>, so:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\sup_{v \in I} f(v) &amp;= f \left( \inf\{ v: v \in I \} \right)
                     = f \left( k 2^{-M} \right) \\
\inf_{v \in I} f(v) &amp;= f \left( \sup\{ v: v \in I \} \right)
                     = f \left( (k + 1) 2^{-M} \right)\end{split}\]</div>
<p>Hence we have the following bound on <span class="math notranslate nohighlight">\(s\)</span>:</p>
<div class="math notranslate nohighlight">
\[\frac{-C - k 2^{-M}}{1 + k 2^{-M}} &lt; s \leq
\frac{C - (k + 1) 2^{-M}}{1 + (k + 1) 2^{-M}}. \quad\quad \text{(S2)}\]</div>
<p>In order for <span class="math notranslate nohighlight">\(s\)</span> to exist, we need that:</p>
<div class="math notranslate nohighlight">
\[\frac{C - (k + 1) 2^{-M}}{1 + (k + 1) 2^{-M}} &gt;
\frac{-C - k 2^{-M}}{1 + k 2^{-M}}\]</div>
<p>which is equivalent to:</p>
<div class="math notranslate nohighlight">
\[\quad\quad 2C - 2^{-M} + (2k + 1) 2^{-M} C &gt; 0
\iff C &gt; \frac{2^{-M - 1}}{1 + (2k + 1) 2^{-M - 1}} \quad\quad \text{(C1)}.\]</div>
<p>Consider the case <span class="math notranslate nohighlight">\(C = 2^{-N}\)</span>.  Since <span class="math notranslate nohighlight">\(0 \leq k \leq 2^M - 1,\)</span> the right hand
side of <span class="math notranslate nohighlight">\(\text{(C1)}\)</span> is bounded by:</p>
<div class="math notranslate nohighlight">
\[2^{-M - 1} &gt; \frac{2^{-M - 1}}{1 + (2k + 1) 2^{-M - 1}} \geq
\frac{2^{-M - 1}}{1 + (2^{M + 1} - 1) 2^{-M - 1}} &gt; 2^{-M - 2}.\]</div>
<p>Hence, from <span class="math notranslate nohighlight">\(\text{(C1)}\)</span>, being an exact power of 2, <span class="math notranslate nohighlight">\(C = 2^{-N}\)</span> is bounded below
by:</p>
<div class="math notranslate nohighlight">
\[C = 2^{-N} \geq 2^{-M - 1}.\]</div>
<p>To make the range reduction efficient, we will want to minimize <span class="math notranslate nohighlight">\(C\)</span> (maximize
<span class="math notranslate nohighlight">\(N\)</span>) while keeping the required precision of <span class="math notranslate nohighlight">\(s`(`r\)</span>) as low as possible.  And
for that, we will consider the following two cases: <span class="math notranslate nohighlight">\(N = M + 1\)</span> and <span class="math notranslate nohighlight">\(N = M\)</span>.</p>
<section id="case-1-n-m-1">
<h4>Case 1 - <span class="math notranslate nohighlight">\(N = M + 1\)</span><a class="headerlink" href="#case-1-n-m-1" title="Link to this heading">¶</a></h4>
<p>When <span class="math notranslate nohighlight">\(N = M + 1\)</span>, <span class="math notranslate nohighlight">\(\text{(S2)}\)</span> becomes:</p>
<div class="math notranslate nohighlight">
\[\frac{-2^{-M - 1} - k 2^{-M}}{1 + k 2^{-M}} &lt; s &lt;
\frac{2^{-M - 1} - (k + 1) 2^{-M}}{1 + (k + 1) 2^{-M}}.
\quad\quad \text{(S2')}\]</div>
<p>This is an interval of length:</p>
<div class="math notranslate nohighlight">
\[\begin{split}l &amp;= \frac{2^{-M - 1} - (k + 1) 2^{-M}}{1 + (k + 1) 2^{-M}} -
     \frac{-2^{-M - 1} - k 2^{-M}}{1 + k 2^{-M}} \\
  &amp;= \frac{(2k + 1)2^{-2M - 1}}{(1 + k 2^{-M})(1 + (k + 1)2^{-M})}
  \quad\quad \text{(L1)}\end{split}\]</div>
<p>As a function of <span class="math notranslate nohighlight">\(k\)</span>, the length <span class="math notranslate nohighlight">\(l\)</span> has its derivative with respect to <span class="math notranslate nohighlight">\(k\)</span>:</p>
<div class="math notranslate nohighlight">
\[\frac{dl}{dk} =
\frac{2^{2M + 1} - 2k(k + 1) - 1}
     {2^{4M}(1 + k 2^{-M})^2 (1 + (k + 1) 2^{-M})^2}\]</div>
<p>which is always positive for <span class="math notranslate nohighlight">\(0 \leq k \leq 2^M - 1\)</span>.  So for all
<span class="math notranslate nohighlight">\(0 &lt; k &lt; 2^{-M}\)</span> (<span class="math notranslate nohighlight">\(k = 0\)</span> will be treated differently in edge cases), and for
<span class="math notranslate nohighlight">\(M &gt; 2\)</span>, <span class="math notranslate nohighlight">\(l\)</span> is bounded below by:</p>
<div class="math notranslate nohighlight">
\[l &gt; 2^{-2M}.\]</div>
<p>It implies that we can always find <span class="math notranslate nohighlight">\(s\)</span> with <span class="math notranslate nohighlight">\(\operatorname{ulp}(s) = 2^{-2M}\)</span>.
And from <span class="math notranslate nohighlight">\(\text{(U1)}\)</span>, <span class="math notranslate nohighlight">\(u = s(1 + m_x) + m_x\)</span>, its <span class="math notranslate nohighlight">\(ulp\)</span> is:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\operatorname{ulp}(u) &amp;= \operatorname{ulp}(s) \cdot \operatorname{ulp}(m_x) \\
                      &amp;= 2^{-2M} \operatorname{ulp}(m_x).\end{split}\]</div>
<p>Since:</p>
<div class="math notranslate nohighlight">
\[|u| &lt; C = 2^{-N} = 2^{-M - 1},\]</div>
<p>Its required precision is:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\operatorname{prec}(u) &amp;= \log_2(2^{-M-1} / \operatorname{ulp}(u)) \\
                       &amp;= \log_2(2^{M - 1} / \operatorname{ulp}(m_x)) \\
                       &amp;= M - 1 - \log_2(\operatorname{ulp}(m_x)).\end{split}\]</div>
<p>This means that in this case, we cannot restrict <span class="math notranslate nohighlight">\(u\)</span> to be exactly representable
in double precision for double precision input <span class="math notranslate nohighlight">\(x\)</span> with <span class="math notranslate nohighlight">\(M &gt; 2\)</span>.  Nonetheless,
for a reasonable value of <span class="math notranslate nohighlight">\(M\)</span>, we can have <span class="math notranslate nohighlight">\(u\)</span> exactly representable in double
precision for single precision input <span class="math notranslate nohighlight">\(x\)</span> (<span class="math notranslate nohighlight">\(\operatorname{ulp}(m_x) = 2^{-23}\)</span>)
such that <span class="math notranslate nohighlight">\(|u| &lt; 2^{-M - 1}\)</span> using a look-up table of size <span class="math notranslate nohighlight">\(2^M\)</span>.</p>
<p>A particular formula for <span class="math notranslate nohighlight">\(s\)</span> can be derived from <span class="math notranslate nohighlight">\(\text{(S2')}\)</span> by the midpoint
formula:</p>
<div class="math notranslate nohighlight">
\[\begin{split}s &amp;= 2^{-2M} \operatorname{round}\left( 2^{2M} \cdot \operatorname{midpoint}
     \left(-\frac{-2^{-M - 1} - k2^{-M}}{1 + k 2^{-M}},
     \frac{2^{-M-1} - (k + 1)2^{-M}}{1 + (k + 1) 2^{-M}}\right) \right) \\
  &amp;= 2^{-2M} \operatorname{round}\left( 2^{2M} \cdot \frac{1}{2} \left(
     \frac{-2^{-M - 1} - k2^{-M}}{1 + k 2^{-M}} +
     \frac{2^{-M - 1} + (k + 1)2^{-M}}{1 + (k + 1) 2^{-M}}
  \right) \right) \\
  &amp;= 2^{-2M} \operatorname{round}\left( \frac{
     - \left(k + \frac{1}{2} \right) \left(2^M - k - \frac{1}{2} \right) }
     {(1 + k 2^{-N})(1 + (k + 1) 2^{-N})} \right) \\
  &amp;= - 2^{-2M} \operatorname{round}\left( \frac{
     \left(k + \frac{1}{2} \right) \left(2^M - k - \frac{1}{2} \right) }
     {(1 + k 2^{-N})(1 + (k + 1) 2^{-N})} \right)  \quad\quad \text{(S3)}\end{split}\]</div>
<p>The corresponding range and formula for <span class="math notranslate nohighlight">\(r = 1 + s\)</span> are:</p>
<div class="math notranslate nohighlight">
\[\frac{1 - 2^{-M - 1}}{1 + k 2^{-M}} &lt; r \leq
\frac{1 + 2^{-M - 1}}{1 + (k + 1) 2^{-M}}\]</div>
<div class="math notranslate nohighlight">
\[\begin{split}r &amp;= 2^{-2M} \operatorname{round}\left( 2^{2M} \cdot
     \operatorname{midpoint}\left( \frac{1 - 2^{-M - 1}}{1 + k 2^{-M}},
        \frac{1 + 2^{-M - 1}}{1 + (k + 1) 2^{-M}}\right) \right) \\
  &amp;= 2^{-2M} \operatorname{round}\left( 2^{2M} \cdot \frac{1}{2} \left(
     \frac{1 + 2^{-M-1}}{1 + (k + 1) 2^{-M}} + \frac{1 - 2^{-M-1}}{1 + k 2^{-M}}
  \right) \right) \\
  &amp;= 2^{-2M} \operatorname{round}\left( 2^{2M} \cdot \frac{
     1 + \left(k + \frac{1}{2} \right) 2^{-M} - 2^{-2M-2} }{(1 + k 2^{-M})
     (1 + (k + 1) 2^{-M})} \right)\end{split}\]</div>
</section>
<section id="case-1-n-m">
<h4>Case 1 - <span class="math notranslate nohighlight">\(N = M\)</span><a class="headerlink" href="#case-1-n-m" title="Link to this heading">¶</a></h4>
<p>When <span class="math notranslate nohighlight">\(N = M\)</span>, <span class="math notranslate nohighlight">\(\text{(S2)}\)</span> becomes:</p>
<div class="math notranslate nohighlight">
\[\frac{-(k + 1)2^{-M}}{1 + k 2^{-M}} &lt; s &lt; \frac{-k 2^{-M}}{1 + (k + 1) 2^{-M}}
\quad\quad \text{(S2&quot;)}\]</div>
<p>This is an interval of length:</p>
<div class="math notranslate nohighlight">
\[\begin{split}l &amp;= \frac{- k 2^{-M}}{1 + (k + 1) 2^{-M}} -
     \frac{- (k + 1) 2^{-M}}{1 + k 2^{-M}} \\
  &amp;= \frac{2^{-M} (1 + (2k + 1) 2^{-M})}{(1 + k 2^{-M})(1 + (k + 1)2^{-M})}
  \quad\quad \text{(L1')}\end{split}\]</div>
<p>As a function of <span class="math notranslate nohighlight">\(k\)</span>, its derivative with respect to <span class="math notranslate nohighlight">\(k\)</span>:</p>
<div class="math notranslate nohighlight">
\[\frac{dl}{dk} =
-\frac{2^{-2M}(k(k + 1)2^{-M + 1} + 2^{-M} + 2k + 1)}
      {(1 + k 2^{-M})^2 (1 + (k + 1) 2^{-M})^2}\]</div>
<p>which is always negative for <span class="math notranslate nohighlight">\(0 \leq k \leq 2^M - 1\)</span>.  So for <span class="math notranslate nohighlight">\(M &gt; 1\)</span>, <span class="math notranslate nohighlight">\(l\)</span> is
bounded below by:</p>
<div class="math notranslate nohighlight">
\[l &gt; \frac{2^{-M - 1} (3 - 2^{-M})}{2 - 2^{-M}} &gt; 2^{-M - 1}.\]</div>
<p>It implies that we can always find <span class="math notranslate nohighlight">\(s\)</span> with <span class="math notranslate nohighlight">\(\operatorname{ulp}(s) = 2^{-M-1}\)</span>.
And from <span class="math notranslate nohighlight">\(\text{(U1)}\)</span>, <span class="math notranslate nohighlight">\(u = s(1 + m_x) + m_x\)</span>, its <span class="math notranslate nohighlight">\(ulp\)</span> is:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\operatorname{ulp}(u) &amp;= \operatorname{ulp}(s) \cdot \operatorname{ulp}(m_x) \\
                      &amp;= 2^{-M - 1} \operatorname{ulp}(m_x).\end{split}\]</div>
<p>Since:</p>
<div class="math notranslate nohighlight">
\[|u| &lt; C = 2^{-N} = 2^{-M},\]</div>
<p>Its required precision is:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\operatorname{prec}(u) &amp;= \log_2(2^{-M} / \operatorname{ulp}(u)) \\
                       &amp;= \log_2(2 / \operatorname{ulp}(m_x)) \\
                       &amp;= 1 - \log_2(\operatorname{ulp}(m_x)).\end{split}\]</div>
<p>Hence, for double precision <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(\operatorname{ulp}(m_x) = 2^{-52}\)</span>, and the
precision needed for <span class="math notranslate nohighlight">\(u\)</span> is <span class="math notranslate nohighlight">\(\operatorname{prec}(u) = 53\)</span>, i.e., <span class="math notranslate nohighlight">\(u\)</span> can be
exactly representable in double precision.  And in this case, <span class="math notranslate nohighlight">\(s\)</span> can be
derived from <span class="math notranslate nohighlight">\(\text{(S2&quot;)}\)</span> by the midpoint formula:</p>
<div class="math notranslate nohighlight">
\[\begin{split}s &amp;= 2^{-M - 1} \operatorname{round}\left( 2^{M + 1} \cdot
     \operatorname{midpoint} \left(-\frac{-(k + 1)2^{-M}}{1 + k 2^{-M}},
     \frac{-k2^{-M}}{1 + (k + 1) 2^{-M}}\right) \right) \\
  &amp;= 2^{-M - 1} \operatorname{round}\left( 2^{M + 1} \cdot \frac{1}{2} \left(
     \frac{-(k + 1)2^{-M}}{1 + k 2^{-M}} + \frac{-k2^{-M}}{1 + (k + 1) 2^{-M}}
     \right) \right) \\
  &amp;= -2^{-M - 1} \operatorname{round}\left( \frac{
     (2k + 1) + (2k^2 + 2k + 1) 2^{-M} }
     {(1 + k 2^{-N})(1 + (k + 1) 2^{-N})} \right)  \quad\quad \text{(S3')}\end{split}\]</div>
<p>The corresponding range and formula for <span class="math notranslate nohighlight">\(r = 1 + s\)</span> are:</p>
<div class="math notranslate nohighlight">
\[\frac{1 - 2^{-M}}{1 + k 2^{-M}} &lt; r \leq \frac{1 + 2^{-M}}{1 + (k + 1) 2^{-M}}\]</div>
<div class="math notranslate nohighlight">
\[\begin{split}r &amp;= 2^{-M-1} \operatorname{round}\left( 2^{M + 1} \cdot
     \operatorname{midpoint}\left( \frac{1 - 2^{-M}}{1 + k 2^{-M}},
        \frac{1 + 2^{-M}}{1 + (k + 1) 2^{-M}}\right) \right) \\
  &amp;= 2^{-M-1} \operatorname{round}\left( 2^{M + 1} \cdot \frac{1}{2} \left(
     \frac{1 + 2^{-M}}{1 + (k + 1) 2^{-M}} + \frac{1 - 2^{-M}}{1 + k 2^{-M}}
  \right) \right) \\
  &amp;= 2^{-M - 1} \operatorname{round}\left( 2^{M + 1} \cdot \frac{
     1 + \left(k + \frac{1}{2} \right) 2^{-M} - 2^{-2M-1} }{(1 + k 2^{-M})
     (1 + (k + 1) 2^{-M})} \right)\end{split}\]</div>
</section>
</section>
<section id="edge-cases">
<h3>Edge cases<a class="headerlink" href="#edge-cases" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>When <span class="math notranslate nohighlight">\(k = 0\)</span>, notice that:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[0 = k 2^{-N} \leq m_x &lt; (k + 1) 2^{-N} = 2^{-N} = C,\]</div>
<p>so we can simply choose <span class="math notranslate nohighlight">\(r = 1\)</span> so that <span class="math notranslate nohighlight">\(\log(r) = 0\)</span> is exact, then <span class="math notranslate nohighlight">\(u = m_x\)</span>.
This will help reduce the accumulated errors when <span class="math notranslate nohighlight">\(m_x\)</span> is close to 0 while
maintaining the range reduction output’s requirements.</p>
<ol class="arabic simple" start="2">
<li><p>When <span class="math notranslate nohighlight">\(k = 2^{N} - 1\)</span>, <span class="math notranslate nohighlight">\(\text{(S2)}\)</span> becomes:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[-\frac{1}{2} - \frac{C - 2^{-M-1}}{2 - 2^{-M}} &lt;&gt; s \leq
-\frac{1}{2} + \frac{C}{2}.\]</div>
<p>so when <span class="math notranslate nohighlight">\(C &gt; 2^{-M - 1}\)</span> is a power of 2, we can always choose:</p>
<div class="math notranslate nohighlight">
\[s = -\frac{1}{2}, \quad \text{i.e.} \quad r = \frac{1}{2}.\]</div>
<p>This reduction works well to avoid catastrophic cancellation happening when
<span class="math notranslate nohighlight">\(e_x = -1\)</span>.</p>
<p>This also works when <span class="math notranslate nohighlight">\(C = 2^{-M - 1}\)</span> if we relax the condition on <span class="math notranslate nohighlight">\(u\)</span> to
<span class="math notranslate nohighlight">\(|u| \leq C = 2^{-M-1}\)</span>.</p>
</section>
<section id="intermediate-precision-and-ziv-s-test">
<h3>Intermediate precision, and Ziv’s test<a class="headerlink" href="#intermediate-precision-and-ziv-s-test" title="Link to this heading">¶</a></h3>
<p>In the fast phase, we want extra precision while performant, so we use
double-double precision for most intermediate computation steps, and employ Ziv
test to see if the result is accurate or not.  In our case, the Ziv’s test can
be described as follow:</p>
<ol class="arabic simple">
<li><p>Let <span class="math notranslate nohighlight">\(re = re.hi + re.lo\)</span> be the double-double output of the fast phase
computation.</p></li>
<li><p>Let <span class="math notranslate nohighlight">\(err\)</span> be an estimated upper bound of the errors of <span class="math notranslate nohighlight">\(re\)</span>.</p></li>
<li><p>If <span class="math notranslate nohighlight">\(\circ(re.hi + (re.lo - err)) == \circ(re.hi + (r.lo + err))\)</span> then the
result is correctly rounded to double precision for the current rounding mode
<span class="math notranslate nohighlight">\(\circ\)</span>.  Otherwise, the accurate phase with extra precision is needed.</p></li>
</ol>
<p>For an easy and cheap estimation of the error bound <span class="math notranslate nohighlight">\(err\)</span>, since the range
reduction step described above is accurate, the errors of the result:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\log(x) &amp;= e_x \log(2) - \log(r) + \log(1 + u) \\
        &amp;\approx e_x \log(2) - \log(r) + u P(u)\end{split}\]</div>
<p>come from 2 parts:</p>
<ol class="arabic simple">
<li><p>the look-up part: <span class="math notranslate nohighlight">\(e_x \log(2) - \log(r)\)</span></p></li>
<li><p>the polynomial approximation part: <span class="math notranslate nohighlight">\(u P(u)\)</span></p></li>
</ol>
<p>The errors of the first part can be computed with a single <span class="math notranslate nohighlight">\(\operatorname{fma}\)</span>
operation:</p>
<div class="math notranslate nohighlight">
\[err_1 = \operatorname{fma}(e_x, err(\log(2)), err(\log(r))),\]</div>
<p>and then combining with the errors of the second part for another
<span class="math notranslate nohighlight">\(\operatorname{fma}\)</span> operation:</p>
<div class="math notranslate nohighlight">
\[err = \operatorname{fma}(u, err(P), err_1)\]</div>
</section>
</section>
<section id="accurate-phase">
<h2>Accurate phase<a class="headerlink" href="#accurate-phase" title="Link to this heading">¶</a></h2>
<section id="extending-range-reduction">
<h3>Extending range reduction<a class="headerlink" href="#extending-range-reduction" title="Link to this heading">¶</a></h3>
<p>Since the output <span class="math notranslate nohighlight">\(u = r(1 + m_x) - 1\)</span> of the fast phase’s range reduction
is computed exactly, we can apply further range reduction steps by
using the following formula:</p>
<div class="math notranslate nohighlight">
\[u_{i + 1} = r_i(1 + u_i) - 1 = u_i \cdot r_i + (r_i - 1),\]</div>
<p>where <span class="math notranslate nohighlight">\(|u_i| &lt; 2^{-N_i}\)</span> and <span class="math notranslate nohighlight">\(u_0 = u\)</span> is representable in double precision.</p>
<p>Let <span class="math notranslate nohighlight">\(s_i = r_i - 1\)</span>, then we can rewrite it as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}u_{i + 1} &amp;= (1 + s_i)(1 + u_i) - 1 \\
          &amp;= s_i u_i + u_i + s_i \\
          &amp;= u_i (1 + s_i) + s_i
          &amp;= s_i (1 + u_i) + u_i.\end{split}\]</div>
<p>Then the bound on <span class="math notranslate nohighlight">\(u_{i + 1}\)</span> is translated to <span class="math notranslate nohighlight">\(s_i\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\frac{-2^{-N_{i + 1}} - u_i}{1 + u_i} &lt; s_i &lt; \frac{2^{-N_{i + 1}} - u_i}{1 + u_i}.\]</div>
<p>Let say we divide the interval <span class="math notranslate nohighlight">\([0, 2^-{N_i})\)</span> into <span class="math notranslate nohighlight">\(2^{M_i}\)</span> subintervals
evenly and use the index <span class="math notranslate nohighlight">\(k\)</span> such that:</p>
<div class="math notranslate nohighlight">
\[k 2^{-N_i - M_i} \leq u_i &lt; (k + 1) 2^{-N_i - M_i},\]</div>
<p>to look-up for the reduction constant <span class="math notranslate nohighlight">\(s_{i, k}\)</span>.  In other word, <span class="math notranslate nohighlight">\(k\)</span> is given
by the formula:</p>
<div class="math notranslate nohighlight">
\[k = \left\lfloor 2^{N_i + M_i} u_i \right\rfloor\]</div>
<p>Notice that our reduction constant <span class="math notranslate nohighlight">\(s_{i, k}\)</span> must work for all <span class="math notranslate nohighlight">\(u_i\)</span> in the
interval <span class="math notranslate nohighlight">\(I = \{ v: k 2^{-N_i - M_i} \leq v &lt; (k + 1) 2^{-N_i - M_i} \}\)</span>,
so it is bounded by:</p>
<div class="math notranslate nohighlight">
\[\sup_{v \in I} \frac{-2^{-N_{i + 1}} - v}{1 + v} &lt; s_{i, k} &lt; \inf_{v \in I} \frac{2^{-N_{i + 1}} - v}{1 + v}\]</div>
<p>For a fixed constant <span class="math notranslate nohighlight">\(|C| &lt; 1\)</span>, let <span class="math notranslate nohighlight">\(f(v) = \frac{C - v}{1 + v}\)</span>, then its derivative
is:</p>
<div class="math notranslate nohighlight">
\[f'(v) = \frac{(-1)(1 + v) - (1)(C - v)}{(1 + v)^2} = \frac{-1 - C}{(1 + v)^2}.\]</div>
<p>Since <span class="math notranslate nohighlight">\(|C| &lt; 1\)</span>, <span class="math notranslate nohighlight">\(f'(v) &lt; 0\)</span> for all <span class="math notranslate nohighlight">\(v \neq -1\)</span>, so:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\sup_{v \in I} f(v) &amp;= f \left( \inf\{ v: v \in I \} \right)
                     = f \left( k 2^{-N_i - M_i} \right) \\
\inf_{v \in I} f(v) &amp;= f \left( \sup\{ v: v \in I \} \right)
                     = f \left( (k + 1) 2^{-N_i - M_i} \right)\end{split}\]</div>
<p>Hence we have the following bound on <span class="math notranslate nohighlight">\(s_{i, k}\)</span>:</p>
<div class="math notranslate nohighlight">
\[\frac{-2^{-N_{i + 1}} - k 2^{-N_i - M_i}}{1 + k 2^{-N_i - M_i}} &lt; s_{i, k}
\leq \frac{2^{-N_{i + 1}} - (k + 1) 2^{-N_i - M_i}}{1 + (k + 1) 2^{-N_i - M_i}}\]</div>
<p>This interval is of length:</p>
<div class="math notranslate nohighlight">
\[\begin{split}l &amp;= \frac{2^{-N_{i + 1}} - (k + 1) 2^{-N_i - M_i}}{1 + (k + 1) 2^{-N_i - M_i}} -
\frac{-2^{-N_{i + 1}} - k 2^{-N_i - M_i}}{1 + k 2^{-N_i - M_i}} \\
&amp;= \frac{2^{-N_{i + 1} + 1} - 2^{-N_i - M_i} + (2k + 1) 2^{-N_{i + 1} - N_i - M_i}}
    {(1 + k 2^{-N_i - M_i})(1 + (k + 1) 2^{-N_i -M_i})}\end{split}\]</div>
<p>So in order to be able to find <span class="math notranslate nohighlight">\(s_{i, k}\)</span>, we need that:</p>
<div class="math notranslate nohighlight">
\[2^{-N_{i + 1} + 1} - 2^{-N_i - M_i} + (2k + 1) 2^{-N_{i + 1} - N_i - M_i} &gt; 0\]</div>
<p>This give us the following bound on <span class="math notranslate nohighlight">\(N_{i + 1}\)</span>:</p>
<div class="math notranslate nohighlight">
\[N_{i + 1} \leq N_i + M_i + 1.\]</div>
<p>To make the range reduction effective, we will want to maximize <span class="math notranslate nohighlight">\(N_{i + 1}\)</span>, so
let consider the two cases: <span class="math notranslate nohighlight">\(N_{i + 1} = N_i + M_i + 1\)</span> and
<span class="math notranslate nohighlight">\(N_{i + 1} = N_i + M_i\)</span>.</p>
<p>The optimal choice to balance between maximizing <span class="math notranslate nohighlight">\(N_{i + 1}\)</span> and minimizing the
precision needed for <span class="math notranslate nohighlight">\(s_{i, k}\)</span> is:</p>
<div class="math notranslate nohighlight">
\[N_{i + 1} = N_i + M_i,\]</div>
<p>and in this case, the optimal <span class="math notranslate nohighlight">\(\operatorname{ulp}(s_{i, k})\)</span> is:</p>
<div class="math notranslate nohighlight">
\[\operatorname{ulp}(s_{i, k}) = 2^{-N_i - M_i}\]</div>
<p>and the corresponding <span class="math notranslate nohighlight">\(\operatorname{ulp}(u_{i + 1})\)</span> is:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\operatorname{ulp}(u_{i + 1}) &amp;= \operatorname{ulp}(u_i) \operatorname{ulp}(s_{i, k}) \\
  &amp;= \operatorname{ulp}(u_i) \cdot 2^{-N_i - M_i} \\
  &amp;= \operatorname{ulp}(u_0) \cdot 2^{-N_0 - M_0} \cdot 2^{-N_0 - M_0 - M_1} \cdots 2^{-N_0 - M_0 - M_1 - \cdots - M_i} \\
  &amp;= 2^{-N_0 - 53} \cdot 2^{-N_0 - M_0} \cdot 2^{-N_0 - M_0 - M_1} \cdots 2^{-N_0 - M_0 - M_1 - \cdots - M_i}\end{split}\]</div>
<p>Since <span class="math notranslate nohighlight">\(|u_{i + 1}| &lt; 2^{-N_{i + 1}} = 2^{-N_0 - M_1 - ... -M_i}\)</span>, the precision
of <span class="math notranslate nohighlight">\(u_{i + 1}\)</span> is:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\operatorname{prec}(u_{i + 1}) &amp;= (N_0 + 53) + (N_0 + M_0) + \cdots +
  (N_0 + M_0 + \cdots + M_i) - (N_0 + M_0 + \cdots + M_i) \\
  &amp;= (i + 1) N_0 + i M_0 + (i - 1) M_1 + \cdots + M_{i - 1} + 53\end{split}\]</div>
<p>If we choose to have the same <span class="math notranslate nohighlight">\(M_0 = M_1 = \cdots = M_i = M\)</span>, this can be
simplified to:</p>
<div class="math notranslate nohighlight">
\[\operatorname{prec}(u_{i + 1}) = (i + 1) N_0 + \frac{i(i + 1)}{2} \cdot M + 53.\]</div>
<p>We summarize the precision analysis for extending the range reduction in the
table below:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(N_0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(M\)</span></p></td>
<td><p>No. steps</p></td>
<td><p>Table size</p></td>
<td><p>Output bound</p></td>
<td><p>ulp(<span class="math notranslate nohighlight">\(s_{i, k}\)</span>)</p></td>
<td><p>prec(<span class="math notranslate nohighlight">\(u_{i + 1}\)</span>)</p></td>
</tr>
<tr class="row-even"><td rowspan="14"><p>7</p></td>
<td rowspan="6"><p>4</p></td>
<td><p>1</p></td>
<td><p>32</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-11}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-12}\)</span></p></td>
<td><p>60</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>64</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-15}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-16}\)</span></p></td>
<td><p>71</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>96</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-19}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-20}\)</span></p></td>
<td><p>86</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>128</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-23}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-24}\)</span></p></td>
<td><p>105</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>160</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-27}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-28}\)</span></p></td>
<td><p>128</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>192</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-31}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-32}\)</span></p></td>
<td><p>155</p></td>
</tr>
<tr class="row-even"><td rowspan="4"><p>5</p></td>
<td><p>3</p></td>
<td><p>192</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-22}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-23}\)</span></p></td>
<td><p>89</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>256</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-27}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-28}\)</span></p></td>
<td><p>111</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>320</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-32}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-33}\)</span></p></td>
<td><p>138</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>384</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-37}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-38}\)</span></p></td>
<td><p>170</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>6</p></td>
<td><p>3</p></td>
<td><p>384</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-25}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-26}\)</span></p></td>
<td><p>92</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>512</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-31}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-32}\)</span></p></td>
<td><p>117</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>7</p></td>
<td><p>1</p></td>
<td><p>256</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-24}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-15}\)</span></p></td>
<td><p>60</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>512</p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-21}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2^{-22}\)</span></p></td>
<td><p>74</p></td>
</tr>
</tbody>
</table>
<p>where:</p>
<ul class="simple">
<li><p>Number of steps = <span class="math notranslate nohighlight">\(i + 1\)</span></p></li>
<li><p>Table size = <span class="math notranslate nohighlight">\((i + 1) 2^{M + 1}\)</span></p></li>
<li><p>Output bound = <span class="math notranslate nohighlight">\(2^{-N_{i + 1}} = 2^{-N_0 - (i + 1) M}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\operatorname{ulp}(s_{i, k}) = 2^{-N_{i + 1} - 1}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\operatorname{prec}(u_{i + 1}) = (i + 1) N_0 + \frac{i(i + 1)}{2} \cdot M + 53\)</span></p></li>
</ul>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">libc</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Status &amp; Support</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Implementation Status</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arch_support.html">Architecture Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platform_support.html">Platform Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../compiler_support.html">Compiler Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Simple Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../full_host_build.html">Full Host Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../full_cross_build.html">Full Cross Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overlay_mode.html">Overlay Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">libc for GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uefi/index.html">libc for UEFI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configure.html">Configure Options</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Maintainers.html">LLVM-libc Maintainers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build_and_test.html">Building and Testing the libc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/index.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../porting.html">Bringup on a New OS or Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing to the libc Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Useful Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../talks.html">Talks</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/labels/libc">Bug Reports</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discourse.llvm.org/c/runtimes/libc">Discourse</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.gg/xS7Z362">Join the Discord</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.com/channels/636084430946959380/636732994891284500">Discord Channel</a></li>
<li class="toctree-l1"><a class="reference external" href="https://lab.llvm.org/buildbot/#/builders?tags=libc">Buildbot</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Implementation Status</a><ul>
  <li><a href="index.html">math.h</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">math.h</a></li>
      <li>Next: <a href="../search.html" title="next chapter">search.h</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2011-2025, LLVM Project.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../_sources/headers/math/log.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>