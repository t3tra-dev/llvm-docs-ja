<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Bringup on a New OS or Architecture &#8212; The LLVM C Library</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=2e637bd6" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributing to the libc Project" href="contributing.html" />
    <link rel="prev" title="Printf Behavior Under All Conditions" href="dev/printf_behavior.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="bringup-on-a-new-os-or-architecture">
<span id="porting"></span><h1>Bringup on a New OS or Architecture<a class="headerlink" href="#bringup-on-a-new-os-or-architecture" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#ci-builders" id="id5">CI builders</a></p></li>
<li><p><a class="reference internal" href="#an-os-specific-config-directory" id="id6">An OS specific config directory</a></p></li>
<li><p><a class="reference internal" href="#architecture-subdirectory" id="id7">Architecture Subdirectory</a></p></li>
<li><p><a class="reference internal" href="#the-entrypoints-txt-file" id="id8">The entrypoints.txt file</a></p></li>
<li><p><a class="reference internal" href="#the-headers-txt-file" id="id9">The headers.txt file</a></p></li>
</ul>
</nav>
<section id="ci-builders">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">CI builders</a><a class="headerlink" href="#ci-builders" title="Link to this heading">¶</a></h2>
<p>If you are contributing a port for an operating system or architecture which
is not covered by existing CI builders, you will also have to present a plan
for testing and contribute a CI builder. See
<a class="reference external" href="https://llvm.org/docs/HowToAddABuilder.html">this guide</a> for information
on how to add new builders to the
<a class="reference external" href="https://lab.llvm.org/buildbot">LLVM buildbot</a>.
You will either have to extend the existing
<a class="reference external" href="https://github.com/llvm/llvm-zorg/blob/main/zorg/buildbot/builders/annotated/libc-linux.py">Linux script</a>
and/or
<a class="reference external" href="https://github.com/llvm/llvm-zorg/blob/main/zorg/buildbot/builders/annotated/libc-windows.py">Windows script</a>
or add a new script for your operating system.</p>
</section>
<section id="an-os-specific-config-directory">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">An OS specific config directory</a><a class="headerlink" href="#an-os-specific-config-directory" title="Link to this heading">¶</a></h2>
<p>If you are starting to bring up LLVM’s libc on a new operating system, the first
step is to add a directory for that OS in the <code class="docutils literal notranslate"><span class="pre">libc/config</span></code> directory. Both
<a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc/config/linux">Linux</a> and
<a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc/config/windows">Windows</a>,
the two operating systems on which LLVM’s libc is being actively developed,
have their own config directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Windows development is not as active as the development on Linux.
There is a
<a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc/config/darwin">Darwin</a>
config also which is in a similar state as Windows.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>LLVM’s libc is being brought up on the
<a class="reference external" href="https://fuchsia.dev/">Fuchsia</a> operating system also. However, there is no
config directory for Fuchsia as the bring up is being done in the Fuchsia
source tree.</p>
</div>
</section>
<section id="architecture-subdirectory">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Architecture Subdirectory</a><a class="headerlink" href="#architecture-subdirectory" title="Link to this heading">¶</a></h2>
<p>There are parts of the libc which are implemented differently for different
architectures. The simplest example of this is the <code class="docutils literal notranslate"><span class="pre">syscall</span></code> function and
its internal implementation - its Linux implementation differs for different
architectures. Since a large part of the libc makes use of syscalls (or an
equivalent on non-Linux like platforms), it might be simpler and convenient to
bring up the libc for one architecture at a time. In such cases, wherein the
support surface of LLVM’s libc differs for each target architecture, one will
have to add a subdirectory (within the config directory of the operating
system) for each target architecture, and list the relevant config information
separately in those subdirectories. For example, for Linux, the x86_64 and
aarch64 configs are in separate directories, named
<a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc/config/linux/x86_64">x86_64</a>
and <a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc/config/linux/aarch64">aarch64</a>.
The libc CMake machinery looks for subdirectories named after the target
architecture.</p>
</section>
<section id="the-entrypoints-txt-file">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">The entrypoints.txt file</a><a class="headerlink" href="#the-entrypoints-txt-file" title="Link to this heading">¶</a></h2>
<p>One of the important pieces of config information is listed in a file named
<code class="docutils literal notranslate"><span class="pre">entrypoints.txt</span></code>. This file lists the targets for the entrypoints (see
<a class="reference internal" href="dev/entrypoints.html#entrypoints"><span class="std std-ref">Entrypoints in LLVM libc</span></a>) you want to include in the static archive of the libc (for
the <a class="reference internal" href="overlay_mode.html#overlay-mode"><span class="std std-ref">Overlay Mode</span></a> and/or the <a class="reference internal" href="full_host_build.html#full-host-build"><span class="std std-ref">Full Host Build</span></a>.) If you are doing an
architecture specific bring up, then an <code class="docutils literal notranslate"><span class="pre">entrypoints.txt</span></code> file should be
created in the architecture subdirectory for each architecture. Else, having a
single <code class="docutils literal notranslate"><span class="pre">entrypoints.txt</span></code> in the operating system directory is sufficient.</p>
<p>The Linux config has an <code class="docutils literal notranslate"><span class="pre">entrypoint.txt</span></code> for each individual target
architecture separately: <a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc/config/linux/aarch64">aarch64</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc/config/linux/arm">arm32</a> and
<a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc/config/linux/x86_64">x86_64</a>. On the
other hand, the Windows config has a single <code class="docutils literal notranslate"><span class="pre">entrypoints.txt</span></code>
<a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc/config/windows/entrypoints.txt">file</a>.</p>
<p>A typical bring up procedure will normally bring up a small group of entrypoints
at a time. The usual practice is to progressively add the targets for those
entrypoints to the <code class="docutils literal notranslate"><span class="pre">entrypoints.txt</span></code> file as they are being brought up. The
same is the case if one is implementing a new entrypoint - the target for the
new entrypoint should be added to the relevant <code class="docutils literal notranslate"><span class="pre">entrypoints.txt</span></code> file. If
the implementation of the new entrypoint supports multiple operating systems and
target architectures, then multiple <code class="docutils literal notranslate"><span class="pre">entrypoints.txt</span></code> files will have to be
updated.</p>
</section>
<section id="the-headers-txt-file">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">The headers.txt file</a><a class="headerlink" href="#the-headers-txt-file" title="Link to this heading">¶</a></h2>
<p>Another important piece of config information is listed in a file named
<code class="docutils literal notranslate"><span class="pre">headers.txt</span></code>. It lists the targets for the set of public headers that are
provided by the libc. This is relevant only if the libc is to be used in the
<a class="reference internal" href="full_host_build.html#full-host-build"><span class="std std-ref">Full Host Build</span></a> on the target operating system and architecture. As with
the <code class="docutils literal notranslate"><span class="pre">entrypoints.txt</span></code> file, one <code class="docutils literal notranslate"><span class="pre">headers.txt</span></code> file should be listed for
each individual target architecture if you are doing an architecture specific
bring up. The Linux config has <code class="docutils literal notranslate"><span class="pre">headers.txt</span></code> file listed separately for the
<a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc/config/linux/aarch64">aarch64</a>
config and the
<a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc/config/linux/x86_64">x86_64</a>
config.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">libc</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Status &amp; Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="headers/index.html">Implementation Status</a></li>
<li class="toctree-l1"><a class="reference internal" href="arch_support.html">Architecture Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="platform_support.html">Platform Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler_support.html">Compiler Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Simple Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="full_host_build.html">Full Host Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="full_cross_build.html">Full Cross Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="overlay_mode.html">Overlay Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu/index.html">libc for GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="uefi/index.html">libc for UEFI</a></li>
<li class="toctree-l1"><a class="reference internal" href="configure.html">Configure Options</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Maintainers.html">LLVM-libc Maintainers</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_and_test.html">Building and Testing the libc</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/index.html">Developer Guides</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Bringup on a New OS or Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to the libc Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Useful Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="talks.html">Talks</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/labels/libc">Bug Reports</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discourse.llvm.org/c/runtimes/libc">Discourse</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.gg/xS7Z362">Join the Discord</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.com/channels/636084430946959380/636732994891284500">Discord Channel</a></li>
<li class="toctree-l1"><a class="reference external" href="https://lab.llvm.org/buildbot/#/builders?tags=libc">Buildbot</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="dev/printf_behavior.html" title="previous chapter">Printf Behavior Under All Conditions</a></li>
      <li>Next: <a href="contributing.html" title="next chapter">Contributing to the libc Project</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2011-2025, LLVM Project.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/porting.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>