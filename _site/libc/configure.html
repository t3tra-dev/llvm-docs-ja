<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Configure Options &#8212; The LLVM C Library</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=2e637bd6" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="LLVM-libc Maintainers" href="Maintainers.html" />
    <link rel="prev" title="Testing the UEFI C library" href="uefi/testing.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <span class="target" id="configure"></span><section id="configure-options">
<h1>Configure Options<a class="headerlink" href="#configure-options" title="Link to this heading">¶</a></h1>
<p>Below is the full set of options one can use to configure the libc build.
An option can be given an explicit value on the CMake command line using
the following syntax:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$&gt;<span class="w"> </span>cmake<span class="w"> </span>&lt;other<span class="w"> </span>build<span class="w"> </span>options&gt;<span class="w"> </span>-D&lt;libc<span class="w"> </span>config<span class="w"> </span>option<span class="w"> </span>name&gt;<span class="o">=</span>&lt;option<span class="w"> </span>value&gt;<span class="w"> </span>&lt;more<span class="w"> </span>options&gt;
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$&gt;<span class="w"> </span>cmake<span class="w"> </span>&lt;other<span class="w"> </span>build<span class="w"> </span>options&gt;<span class="w"> </span>-DLIBC_CONF_PRINTF_DISABLE_FLOAT<span class="o">=</span>ON<span class="w"> </span>&lt;more<span class="w"> </span>options&gt;
</pre></div>
</div>
<p>See the main <code class="docutils literal notranslate"><span class="pre">config/config.json</span></code>, and the platform and architecture specific
overrides in <code class="docutils literal notranslate"><span class="pre">config/&lt;platform&gt;/config.json</span></code> and <code class="docutils literal notranslate"><span class="pre">config/&lt;platform&gt;/&lt;arch&gt;/config.json,</span></code>
to learn about the defaults for your platform and target.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>“codegen” options</strong></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_ENABLE_STRONG_STACK_PROTECTOR</span></code>: Enable -fstack-protector-strong to defend against stack smashing attack.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_KEEP_FRAME_POINTER</span></code>: Keep frame pointer in functions for better debugging experience.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>“errno” options</strong></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_ERRNO_MODE</span></code>: The implementation used for errno, acceptable values are LIBC_ERRNO_MODE_DEFAULT, LIBC_ERRNO_MODE_UNDEFINED, LIBC_ERRNO_MODE_THREAD_LOCAL, LIBC_ERRNO_MODE_SHARED, LIBC_ERRNO_MODE_EXTERNAL, LIBC_ERRNO_MODE_SYSTEM, and LIBC_ERRNO_MODE_SYSTEM_INLINE.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>“general” options</strong></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_ADD_NULL_CHECKS</span></code>: Add nullptr checks in the library’s implementations to some functions for which passing nullptr is undefined behavior.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>“math” options</strong></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_FREXP_INF_NAN_EXPONENT</span></code>: The value written back to the second parameter when calling frexp/frexpf/frexpl` with <cite>+/-Inf</cite>/<cite>NaN</cite> is unspecified.  Configure an explicit exp value for Inf/NaN inputs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_MATH_OPTIMIZATIONS</span></code>: Configures optimizations for math functions. Values accepted are LIBC_MATH_SKIP_ACCURATE_PASS, LIBC_MATH_SMALL_TABLES, LIBC_MATH_NO_ERRNO, LIBC_MATH_NO_EXCEPT, and LIBC_MATH_FAST.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>“printf” options</strong></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_PRINTF_DISABLE_FIXED_POINT</span></code>: Disable printing fixed point values in printf and friends.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_PRINTF_DISABLE_FLOAT</span></code>: Disable printing floating point values in printf and friends.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_PRINTF_DISABLE_INDEX_MODE</span></code>: Disable index mode in the printf format string.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_PRINTF_DISABLE_STRERROR</span></code>: Disable handling of %m to print strerror in printf and friends.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_PRINTF_DISABLE_WRITE_INT</span></code>: Disable handling of %n in printf format string.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_PRINTF_FLOAT_TO_STR_NO_SPECIALIZE_LD</span></code>: Use the same mode for double and long double in printf.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_PRINTF_FLOAT_TO_STR_USE_DYADIC_FLOAT</span></code>: Use dyadic float for faster and smaller but less accurate printf doubles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_PRINTF_FLOAT_TO_STR_USE_FLOAT320</span></code>: Use an alternative printf float implementation based on 320-bit floats</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_PRINTF_FLOAT_TO_STR_USE_MEGA_LONG_DOUBLE_TABLE</span></code>: Use large table for better printf long double performance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_PRINTF_RUNTIME_DISPATCH</span></code>: Use dynamic dispatch for the output mechanism to reduce code size.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>“pthread” options</strong></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_RAW_MUTEX_DEFAULT_SPIN_COUNT</span></code>: Default number of spins before blocking if a mutex is in contention (default to 100).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_RWLOCK_DEFAULT_SPIN_COUNT</span></code>: Default number of spins before blocking if a rwlock is in contention (default to 100).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_TIMEOUT_ENSURE_MONOTONICITY</span></code>: Automatically adjust timeout to CLOCK_MONOTONIC (default to true). POSIX API may require CLOCK_REALTIME, which can be unstable and leading to unexpected behavior. This option will convert the real-time timestamp to monotonic timestamp relative to the time of call.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>“qsort” options</strong></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_QSORT_IMPL</span></code>: Configures sorting algorithm for qsort and qsort_r. Values accepted are LIBC_QSORT_QUICK_SORT, LIBC_QSORT_HEAP_SORT.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>“scanf” options</strong></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_SCANF_DISABLE_FLOAT</span></code>: Disable parsing floating point values in scanf and friends.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_SCANF_DISABLE_INDEX_MODE</span></code>: Disable index mode in the scanf format string.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>“setjmp” options</strong></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_SETJMP_AARCH64_RESTORE_PLATFORM_REGISTER</span></code>: Make setjmp save the value of x18, and longjmp restore it. The AArch64 ABI delegates this register to platform ABIs, which can choose whether to make it caller-saved.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>“string” options</strong></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_MEMSET_X86_USE_SOFTWARE_PREFETCHING</span></code>: Inserts prefetch for write instructions (PREFETCHW) for memset on x86 to recover performance when hardware prefetcher is disabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_STRING_UNSAFE_WIDE_READ</span></code>: Read more than a byte at a time to perform byte-string operations like strlen.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>“threads” options</strong></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_THREAD_MODE</span></code>: The implementation used for Mutex, acceptable values are LIBC_THREAD_MODE_PLATFORM, LIBC_THREAD_MODE_SINGLE, and LIBC_THREAD_MODE_EXTERNAL.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>“time” options</strong></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBC_CONF_TIME_64BIT</span></code>: Force the size of time_t to 64 bits, even on platforms where compatibility considerations would otherwise make it 32-bit.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">libc</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Status &amp; Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="headers/index.html">Implementation Status</a></li>
<li class="toctree-l1"><a class="reference internal" href="arch_support.html">Architecture Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="platform_support.html">Platform Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler_support.html">Compiler Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Simple Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="full_host_build.html">Full Host Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="full_cross_build.html">Full Cross Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="overlay_mode.html">Overlay Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu/index.html">libc for GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="uefi/index.html">libc for UEFI</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configure Options</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Maintainers.html">LLVM-libc Maintainers</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_and_test.html">Building and Testing the libc</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/index.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="porting.html">Bringup on a New OS or Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to the libc Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Useful Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="talks.html">Talks</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/libc">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/labels/libc">Bug Reports</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discourse.llvm.org/c/runtimes/libc">Discourse</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.gg/xS7Z362">Join the Discord</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.com/channels/636084430946959380/636732994891284500">Discord Channel</a></li>
<li class="toctree-l1"><a class="reference external" href="https://lab.llvm.org/buildbot/#/builders?tags=libc">Buildbot</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="uefi/testing.html" title="previous chapter">Testing the UEFI C library</a></li>
      <li>Next: <a href="Maintainers.html" title="next chapter">LLVM-libc Maintainers</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2011-2025, LLVM Project.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/configure.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>