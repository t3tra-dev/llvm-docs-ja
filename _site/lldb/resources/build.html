<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Testing" href="test.html" /><link rel="prev" title="Contributing" href="contributing.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.01.29 -->
        <title>Building - üêõ LLDB</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f0f0f0;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">üêõ LLDB</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">üêõ LLDB</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Using LLDB</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../use/tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/map.html">GDB to LLDB command map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/formatting.html">Frame and Thread Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/variable.html">Variable Formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/symbolication.html">Symbolication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/symbols.html">Symbols on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/remote.html">Remote Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/intel_pt.html">Tracing with Intel Processor Trace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/ondemand.html">On Demand Symbols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/aarch64-linux.html">Using LLDB On AArch64 Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/symbolfilejson.html">JSON Symbol File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/mcp.html">Model Context Protocol (MCP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/links.html">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../man/lldb.html">Man Page</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Scripting LLDB</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../use/python.html">Python Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/python-reference.html">Python Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_extensions.html">Python Extensions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developing LLDB</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="qemu-testing.html">Testing LLDB using QEMU</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="fuzzing.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="sbapi.html">Scripting Bridge API</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataformatters.html">Data Formatters</a></li>
<li class="toctree-l1"><a class="reference internal" href="formatterbytecode.html">Formatter Bytecode</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">DWARF Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="lldbgdbremote.html">GDB Remote Protocol Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="lldbplatformpackets.html">LLDB Platform Packets</a></li>
<li class="toctree-l1"><a class="reference internal" href="caveats.html">Caveats</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Open Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="lldbdap.html">Contributing to LLDB-DAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="addinglanguagesupport.html">Adding Programming Language Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://lldb.llvm.org/cpp_reference/namespacelldb.html">Public C++ API</a></li>
<li class="toctree-l1"><a class="reference external" href="https://lldb.llvm.org/cpp_reference/index.html">Private C++ API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/releases">Releases</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.gg/xS7Z362">Join the Discord</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.com/channels/636084430946959380/636732809708306432">Discord Channel</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discourse.llvm.org/c/subprojects/lldb/8">Discussion Forums</a></li>
<li class="toctree-l1"><a class="reference external" href="https://llvm.org/docs/DeveloperPolicy.html">Developer Policy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/issues?q=is%3Aissue+label%3Alldb+is%3Aopen">Bug Reports</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/llvm/llvm-project/pulls?q=is%3Apr+label%3Alldb+is%3Aopen">Code Reviews</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/llvm/llvm-project/edit/main/lldb/docs/resources/build.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="building">
<h1>Building<a class="headerlink" href="#building" title="Link to this heading">#</a></h1>
<section id="getting-the-sources">
<h2>Getting the Sources<a class="headerlink" href="#getting-the-sources" title="Link to this heading">#</a></h2>
<p>Please refer to the <a class="reference external" href="https://llvm.org/docs/GettingStarted.html#getting-started-with-llvm">LLVM Getting Started Guide</a> for
general instructions on how to check out the LLVM monorepo, which contains the
LLDB sources.</p>
<p>Git browser: <a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/lldb">https://github.com/llvm/llvm-project/tree/main/lldb</a></p>
</section>
<section id="preliminaries">
<h2>Preliminaries<a class="headerlink" href="#preliminaries" title="Link to this heading">#</a></h2>
<p>LLDB relies on many of the technologies developed by the larger LLVM project.
In particular, it requires both Clang and LLVM itself in order to build. Due to
this tight integration the Getting Started guides for both of these projects
come as prerequisite reading:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://llvm.org/docs/GettingStarted.html">LLVM</a></p></li>
<li><p><a class="reference external" href="http://clang.llvm.org/get_started.html">Clang</a></p></li>
</ul>
<p>The following requirements are shared on all platforms.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://cmake.org">CMake</a></p></li>
<li><p><a class="reference external" href="https://ninja-build.org">Ninja</a> (strongly recommended)</p></li>
</ul>
<p>If you want to run the test suite, you‚Äôll need to build LLDB with Python
scripting support.</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.python.org/">Python</a> 3.8 or later.</p></li>
<li><p><a class="reference external" href="http://swig.org/">SWIG</a> 4 or later.</p></li>
</ul>
<p>If you are on FreeBSD or NetBSD, you will need to install <code class="docutils literal notranslate"><span class="pre">gmake</span></code> for building
the test programs. On other platforms <code class="docutils literal notranslate"><span class="pre">make</span></code> is used.</p>
<section id="optional-dependencies">
<span id="id1"></span><h3>Optional Dependencies<a class="headerlink" href="#optional-dependencies" title="Link to this heading">#</a></h3>
<p>Although the following dependencies are optional, they have a big impact on
LLDB‚Äôs functionality. It is strongly encouraged to build LLDB with these
dependencies enabled.</p>
<p>By default they are auto-detected: if CMake can find the dependency it will be
used. It is possible to override this behavior by setting the corresponding
CMake flag to <code class="docutils literal notranslate"><span class="pre">On</span></code> or <code class="docutils literal notranslate"><span class="pre">Off</span></code> to force the dependency to be enabled or
disabled. When a dependency is set to <code class="docutils literal notranslate"><span class="pre">On</span></code> and can‚Äôt be found it will cause a
CMake configuration error.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>CMake Flag</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Editline</p></td>
<td><p>Generic line editing, history, Emacs and Vi bindings</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LLDB_ENABLE_LIBEDIT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Curses</p></td>
<td><p>Text user interface</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LLDB_ENABLE_CURSES</span></code></p></td>
</tr>
<tr class="row-even"><td><p>LZMA</p></td>
<td><p>Lossless data compression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LLDB_ENABLE_LZMA</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Libxml2</p></td>
<td><p>XML</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LLDB_ENABLE_LIBXML2</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Python</p></td>
<td><p>Python scripting. &gt;= 3.8 is required.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LLDB_ENABLE_PYTHON</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Lua</p></td>
<td><p>Lua scripting. Lua 5.3 and 5.4 are supported.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LLDB_ENABLE_LUA</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Depending on your platform and package manager, one might run any of the
commands below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ yum install libedit-devel libxml2-devel ncurses-devel python-devel swig
$ sudo apt-get install build-essential swig python3-dev libedit-dev libncurses5-dev libxml2-dev
$ pkg install swig python libxml2
$ pkgin install swig python38 cmake ninja-build
$ brew install swig cmake ninja
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is an <a class="reference external" href="https://github.com/swig/swig/issues/1321">incompatibility</a> between Python version 3.7 and later
and swig versions older than 4.0.0 which makes builds of LLDB using debug
versions of python unusable. This primarily affects Windows, as debug builds of
LLDB must use debug python as well.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Installing multiple versions of Curses, particularly when only one is built with
wide character support, can cause lldb to be linked with an incorrect set of
libraries. If your system already has Curses, we recommend you use that version.
If you do install another one, use a tool like <code class="docutils literal notranslate"><span class="pre">ldd</span></code> to ensure only one version
of Curses is being used in the final <code class="docutils literal notranslate"><span class="pre">lldb</span></code> executable.</p>
</div>
</section>
<section id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Visual Studio 2019.</p></li>
<li><p>The latest Windows SDK.</p></li>
<li><p>The Active Template Library (ATL).</p></li>
<li><p><a class="reference external" href="http://gnuwin32.sourceforge.net/">GnuWin32</a> for CoreUtils and Make.</p></li>
<li><p><a class="reference external" href="https://www.python.org/downloads/windows/">Python 3</a>.  Make sure to (1) get
the x64 variant if that‚Äôs what you‚Äôre targeting and (2) install the debug
library if you want to build a debug lldb. The standalone installer is the
easiest way to get the debug library.</p></li>
<li><p><a class="reference external" href="https://github.com/Microsoft/PTVS/">Python Tools for Visual Studio</a>. If you plan to debug test failures
or even write new tests at all, PTVS is an indispensable debugging
extension to VS that enables full editing and debugging support for Python
(including mixed native/managed debugging).</p></li>
<li><p><a class="reference external" href="http://www.swig.org/download.html">SWIG for Windows</a></p></li>
</ul>
<p>The steps outlined here describes how to set up your system and install the
required dependencies such that they can be found when needed during the build
process. They only need to be performed once.</p>
<ol class="arabic simple">
<li><p>Install Visual Studio with the ‚ÄúDesktop Development with C++‚Äù workload and
the ‚ÄúPython Development‚Äù workload.</p></li>
<li><p>Install GnuWin32, making sure <code class="docutils literal notranslate"><span class="pre">&lt;GnuWin32</span> <span class="pre">install</span> <span class="pre">dir&gt;\bin</span></code> is added to
your PATH environment variable. Verify that utilities like <code class="docutils literal notranslate"><span class="pre">dirname</span></code> and
<code class="docutils literal notranslate"><span class="pre">make</span></code> are available from your terminal.</p></li>
<li><p>Install SWIG for Windows, making sure <code class="docutils literal notranslate"><span class="pre">&lt;SWIG</span> <span class="pre">install</span> <span class="pre">dir&gt;</span></code> is added to
your PATH environment variable. Verify that <code class="docutils literal notranslate"><span class="pre">swig</span></code> is available from your
terminal.</p></li>
<li><p>Install Python 3 from the standalone installer and include the debug libraries
in the install, making sure the Python install path is added to your PATH
environment variable.</p></li>
<li><p>Register the Debug Interface Access DLLs with the Registry from a privileged
terminal.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">regsvr32</span> <span class="s2">&quot;C:\Program Files (x86)\Microsoft Visual Studio</span><span class="se">\201</span><span class="s2">9\Community\DIA SDK</span><span class="se">\b</span><span class="s2">in\msdia140.dll&quot;</span>
<span class="o">&gt;</span> <span class="n">regsvr32</span> <span class="s2">&quot;C:\Program Files (x86)\Microsoft Visual Studio</span><span class="se">\201</span><span class="s2">9\Community\DIA SDK</span><span class="se">\b</span><span class="s2">in</span><span class="se">\a</span><span class="s2">md64\msdia140.dll&quot;</span>
</pre></div>
</div>
<p>Any command prompt from which you build LLDB should have a valid Visual Studio
environment setup. This means you should open an appropriate <a class="reference external" href="https://docs.microsoft.com/en-us/visualstudio/ide/reference/command-prompt-powershell?view=vs-2019">Developer Command
Prompt for VS</a>
corresponding to the version you wish to use or run <code class="docutils literal notranslate"><span class="pre">vcvarsall.bat</span></code> or
<code class="docutils literal notranslate"><span class="pre">VsDevCmd.bat</span></code>.</p>
</section>
<section id="macos">
<h3>macOS<a class="headerlink" href="#macos" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>To use the in-tree debug server on macOS, lldb needs to be code signed. For
more information see <a class="reference internal" href="#codesigning"><span class="std std-ref">Code Signing on macOS</span></a> below.</p></li>
<li><p>If you are building both Clang and LLDB together, be sure to also check out
libc++, which is a required for testing on macOS.</p></li>
</ul>
</section>
</section>
<section id="building-lldb-with-cmake">
<h2>Building LLDB with CMake<a class="headerlink" href="#building-lldb-with-cmake" title="Link to this heading">#</a></h2>
<p>The LLVM project is migrating to a single monolithic repository for LLVM and
its subprojects. This is the recommended way to build LLDB. Check out the
source-tree with git:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/llvm/llvm-project.git
</pre></div>
</div>
<p>CMake is a cross-platform build-generator tool. CMake does not build the
project, it generates the files needed by your build tool. The recommended
build tool for LLVM is Ninja, but other generators like Xcode or Visual Studio
may be used as well. Please also read <a class="reference external" href="https://llvm.org/docs/CMake.html">Building LLVM with CMake</a>.</p>
<section id="regular-in-tree-builds">
<h3>Regular in-tree builds<a class="headerlink" href="#regular-in-tree-builds" title="Link to this heading">#</a></h3>
<p>Create a new directory for your build-tree. From there run CMake and point it
to the <code class="docutils literal notranslate"><span class="pre">llvm</span></code> directory in the source-tree:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake -G Ninja -DLLVM_ENABLE_PROJECTS=&quot;clang;lldb&quot; [&lt;cmake options&gt;] path/to/llvm-project/llvm
</pre></div>
</div>
<p>We used the <code class="docutils literal notranslate"><span class="pre">LLVM_ENABLE_PROJECTS</span></code> option here to tell the build-system which
subprojects to build in addition to LLVM (for more options see
<a class="reference internal" href="#commoncmakeoptions"><span class="std std-ref">Common CMake options</span></a> and <a class="reference internal" href="#cmakecaches"><span class="std std-ref">CMake caches</span></a>). Parts of the LLDB test suite
require <code class="docutils literal notranslate"><span class="pre">lld</span></code>. Add it to the list in order to run all tests. Once CMake is done,
run ninja to perform the actual build.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ninja lldb lldb-server
</pre></div>
</div>
<p>If you only want lldb, or are on a platform where lldb-server is not supported,
you can pass just <code class="docutils literal notranslate"><span class="pre">lldb</span></code>. Ninja will only build what is necessary to run the
lldb driver:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ninja lldb
</pre></div>
</div>
</section>
<section id="standalone-builds">
<h3>Standalone builds<a class="headerlink" href="#standalone-builds" title="Link to this heading">#</a></h3>
<p>This is another way to build LLDB. We can use the same source-tree as we
checked out above, but now we will have multiple build-trees:</p>
<ul class="simple">
<li><p>the main build-tree for LLDB in <code class="docutils literal notranslate"><span class="pre">/path/to/lldb-build</span></code></p></li>
<li><p>one or more provided build-trees for LLVM and Clang; for simplicity we use a
single one in <code class="docutils literal notranslate"><span class="pre">/path/to/llvm-build</span></code></p></li>
</ul>
<p>Run CMake with <code class="docutils literal notranslate"><span class="pre">-B</span></code> pointing to a new directory for the provided
build-tree<sup>1</sup> and the positional argument pointing to the <code class="docutils literal notranslate"><span class="pre">llvm</span></code>
directory in the source-tree.<sup>2</sup> Note that we leave out LLDB here and only include
Clang. Then we build the <code class="docutils literal notranslate"><span class="pre">ALL</span></code> target with ninja:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake -B /path/to/llvm-build -G Ninja \
        -DCMAKE_BUILD_TYPE=[&lt;build type&gt;] \
        -DLLVM_ENABLE_PROJECTS=clang \
        -DCMAKE_BUILD_TYPE=Release \
        [&lt;more cmake options&gt;] /path/to/llvm-project/llvm
$ ninja
</pre></div>
</div>
<p>Now run CMake a second time with <code class="docutils literal notranslate"><span class="pre">-B</span></code> pointing to a new directory for the
main build-tree and the positional argument pointing to the <code class="docutils literal notranslate"><span class="pre">lldb</span></code> directory
in the source-tree. In order to find the provided build-tree, the build system
looks for the path to its CMake modules in <code class="docutils literal notranslate"><span class="pre">LLVM_DIR</span></code>. If you use a separate
build directory for Clang, remember to pass its module path via <code class="docutils literal notranslate"><span class="pre">Clang_DIR</span></code>
(CMake variables are case-sensitive!):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake -B /path/to/lldb-build -G Ninja \
        -DCMAKE_BUILD_TYPE=Release \
        -DLLVM_DIR=/path/to/llvm-build/lib/cmake/llvm \
        [&lt;more cmake options&gt;] /path/to/llvm-project/lldb
$ ninja lldb lldb-server
</pre></div>
</div>
<p>If you do not require or cannot build <code class="docutils literal notranslate"><span class="pre">lldb-server</span></code> on your platform, simply
remove it from the Ninja command.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">-B</span></code> argument was undocumented for a while and is only officially
supported since <a class="reference external" href="https://cmake.org/cmake/help/v3.14/release/3.14.html#command-line">CMake version 3.14</a></p></li>
<li><p>If you want to have a standalone LLDB build with tests enabled, you also
need to pass in <code class="docutils literal notranslate"><span class="pre">-DLLVM_ENABLE_RUNTIME='libcxx;libcxxabi;libunwind'</span></code> to your CMake invocation when configuring your LLVM standalone build.</p></li>
</ol>
</div>
</section>
<section id="common-cmake-options">
<span id="commoncmakeoptions"></span><h3>Common CMake options<a class="headerlink" href="#common-cmake-options" title="Link to this heading">#</a></h3>
<p>Following is a description of some of the most important CMake variables which
you are likely to encounter. A variable FOO is set by adding <code class="docutils literal notranslate"><span class="pre">-DFOO=value</span></code> to
the CMake command line.</p>
<p>If you want to debug the lldb that you‚Äôre building ‚Äì that is, build it with
debug info enabled ‚Äì pass two additional arguments to cmake before running
ninja:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake -G Ninja \
    -DLLDB_EXPORT_ALL_SYMBOLS=1 \
    -DCMAKE_BUILD_TYPE=Debug
    &lt;path to root of llvm source tree&gt;
</pre></div>
</div>
<p>If you want to run the test suite, you will need a compiler to build the test
programs. If you have Clang checked out, that will be used by default.
Alternatively, you can specify a C and C++ compiler to be used by the test
suite.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake -G Ninja \
    -DLLDB_TEST_COMPILER=&lt;path to C compiler&gt; \
    &lt;path to root of llvm source tree&gt;
</pre></div>
</div>
<p>It is strongly recommend to use a release build for the compiler to speed up
test execution.</p>
<section id="id2">
<h4>Windows<a class="headerlink" href="#id2" title="Link to this heading">#</a></h4>
<p>On Windows the LLDB test suite requires lld. Either add <code class="docutils literal notranslate"><span class="pre">lld</span></code> to
<code class="docutils literal notranslate"><span class="pre">LLVM_ENABLE_PROJECTS</span></code> or disable the test suite with
<code class="docutils literal notranslate"><span class="pre">LLDB_INCLUDE_TESTS=OFF</span></code>.</p>
<p>Although the following CMake variables are by no means Windows specific, they
are commonly used on Windows.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LLDB_TEST_DEBUG_TEST_CRASHES</span></code> (Default=0): If set to 1, will cause Windows
to generate a crash dialog whenever lldb.exe or the python extension module
crashes while running the test suite. If set to 0, LLDB will silently crash.
Setting to 1 allows a developer to attach a JIT debugger at the time of a
crash, rather than having to reproduce a failure or use a crash dump.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYTHON_HOME</span></code> (Required): Path to the folder where the Python distribution
is installed. For example, <code class="docutils literal notranslate"><span class="pre">C:\Python35</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLDB_EMBED_PYTHON_HOME</span></code> (Default=1 on Windows): When this is 1, LLDB will bind
statically to the location specified in the <code class="docutils literal notranslate"><span class="pre">PYTHON_HOME</span></code> CMake variable,
ignoring any value of <code class="docutils literal notranslate"><span class="pre">PYTHONHOME</span></code> set in the environment. This is most
useful for developers who simply want to run LLDB after they build it. If you
wish to move a build of LLDB to a different machine where Python will be in a
different location, setting <code class="docutils literal notranslate"><span class="pre">LLDB_EMBED_PYTHON_HOME</span></code> to 0 will cause
Python to use its default mechanism for finding the python installation at
runtime (looking for installed Pythons, or using the <code class="docutils literal notranslate"><span class="pre">PYTHONHOME</span></code>
environment variable if it is specified).</p></li>
</ul>
<p>Sample command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake -G Ninja^
    -DLLDB_TEST_DEBUG_TEST_CRASHES=1^
    -DPYTHON_HOME=C:\Python35^
    -DLLDB_TEST_COMPILER=d:\src\llvmbuild\ninja_release\bin\clang.exe^
    &lt;path to root of llvm source tree&gt;
</pre></div>
</div>
<p>Building with ninja is both faster and simpler than building with Visual Studio,
but chances are you still want to debug LLDB with an IDE. One solution is to run
cmake twice and generate the output into two different folders. One for
compiling (the ninja folder), and one for editing, browsing and debugging.</p>
<p>Follow the previous instructions in one directory, and generate a Visual Studio
project in another directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake -G &quot;Visual Studio 16 2019&quot; -A x64 -T host=x64 &lt;cmake variables&gt; &lt;path to root of llvm source tree&gt;
</pre></div>
</div>
<p>Then you can open the .sln file in Visual Studio, set lldb as the startup
project, and use F5 to run it. You need only edit the project settings to set
the executable and the working directory to point to binaries inside of the
ninja tree.</p>
</section>
<section id="id3">
<h4>macOS<a class="headerlink" href="#id3" title="Link to this heading">#</a></h4>
<p>On macOS the LLDB test suite requires libc++. Either add
<code class="docutils literal notranslate"><span class="pre">LLVM_ENABLE_RUNTIMES=&quot;libcxx;libcxxabi;libunwind&quot;</span></code> or disable the test suite with
<code class="docutils literal notranslate"><span class="pre">LLDB_INCLUDE_TESTS=OFF</span></code>. Further useful options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LLDB_BUILD_FRAMEWORK:BOOL</span></code>: Builds the LLDB.framework.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLDB_CODESIGN_IDENTITY:STRING</span></code>: Set the identity to use for code-signing
all executables. If not explicitly specified, only <code class="docutils literal notranslate"><span class="pre">debugserver</span></code> will be
code-signed with identity <code class="docutils literal notranslate"><span class="pre">lldb_codesign</span></code> (see <a class="reference internal" href="#codesigning"><span class="std std-ref">Code Signing on macOS</span></a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLDB_USE_SYSTEM_DEBUGSERVER:BOOL</span></code>: Use the system‚Äôs debugserver, so lldb is
functional without setting up code-signing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLDB_ENFORCE_STRICT_TEST_REQUIREMENTS:BOOL</span></code>: Detect missing packages or modules at configuration time.</p></li>
</ul>
</section>
</section>
<section id="cmake-caches">
<span id="cmakecaches"></span><h3>CMake caches<a class="headerlink" href="#cmake-caches" title="Link to this heading">#</a></h3>
<p>CMake caches allow to store common sets of configuration options in the form of
CMake scripts and can be useful to reproduce builds for particular use-cases
(see by analogy <a class="reference external" href="https://llvm.org/docs/AdvancedBuilds.html">usage in LLVM and Clang</a>).
A cache is passed to CMake with the <code class="docutils literal notranslate"><span class="pre">-C</span></code> flag, following the absolute path to
the file on disk. Subsequent <code class="docutils literal notranslate"><span class="pre">-D</span></code> options are still allowed. Please find the
currently available caches in the <a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/lldb/cmake/caches">lldb/cmake/caches/</a>
directory.</p>
<section id="common-configurations-on-macos">
<h4>Common configurations on macOS<a class="headerlink" href="#common-configurations-on-macos" title="Link to this heading">#</a></h4>
<p>Build, test and install a distribution of LLDB from the <a class="reference external" href="https://github.com/llvm/llvm-project">monorepo</a> (see also <a class="reference external" href="https://llvm.org/docs/BuildingADistribution.html">Building a Distribution of
LLVM</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/llvm/llvm-project

$ cmake -B /path/to/lldb-build -G Ninja \
        -C /path/to/llvm-project/lldb/cmake/caches/Apple-lldb-macOS.cmake \
        -DLLVM_ENABLE_PROJECTS=&quot;clang;lldb&quot; \
        -DLLVM_ENABLE_RUNTIMES=&quot;libcxx;libcxxabi;libunwind&quot; \
        llvm-project/llvm

$ DESTDIR=/path/to/lldb-install ninja -C /path/to/lldb-build check-lldb install-distribution
</pre></div>
</div>
<p id="cmakegeneratedxcodeproject">Build LLDB standalone for development with Xcode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/llvm/llvm-project

$ cmake -B /path/to/llvm-build -G Ninja \
        -C /path/to/llvm-project/lldb/cmake/caches/Apple-lldb-base.cmake \
        -DLLVM_ENABLE_PROJECTS=&quot;clang&quot; \
        -DLLVM_ENABLE_RUNTIMES=&quot;libcxx;libcxxabi;libunwind&quot; \
        llvm-project/llvm
$ ninja -C /path/to/llvm-build

$ cmake -B /path/to/lldb-build \
        -C /path/to/llvm-project/lldb/cmake/caches/Apple-lldb-Xcode.cmake \
        -DLLVM_DIR=/path/to/llvm-build/lib/cmake/llvm \
        llvm-project/lldb
$ open lldb.xcodeproj
$ cmake --build /path/to/lldb-build --target check-lldb
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-B</span></code> argument was undocumented for a while and is only officially
supported since <a class="reference external" href="https://cmake.org/cmake/help/v3.14/release/3.14.html#command-line">CMake version 3.14</a></p>
</div>
</section>
</section>
</section>
<section id="building-the-documentation">
<h2>Building the Documentation<a class="headerlink" href="#building-the-documentation" title="Link to this heading">#</a></h2>
<p>If you wish to build the optional (reference) documentation, additional
dependencies are required:</p>
<ul class="simple">
<li><p>Sphinx (for the website and the Python API reference)</p></li>
<li><p>Graphviz (for the ‚Äòdot‚Äô tool)</p></li>
<li><p>doxygen (if you wish to build the C++ API reference)</p></li>
<li><p>SWIG (for generating Python bindings)</p></li>
</ul>
<p>To install the system prerequisites for building the documentation (on Debian/Ubuntu)
do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get install doxygen graphviz swig
</pre></div>
</div>
<p>To install Sphinx and its dependencies, use the <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> available within LLVM
to ensure you get a working configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip3 install -r /path/to/llvm-project/llvm/docs/requirements.txt
</pre></div>
</div>
<p>To build the documentation, configure with <code class="docutils literal notranslate"><span class="pre">LLVM_ENABLE_SPHINX=ON</span></code> and build the desired target(s).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ninja docs-lldb-html
$ ninja docs-lldb-man
$ ninja lldb-cpp-doc
</pre></div>
</div>
</section>
<section id="cross-compiling-lldb">
<h2>Cross-compiling LLDB<a class="headerlink" href="#cross-compiling-lldb" title="Link to this heading">#</a></h2>
<p>The advice presented here may not be complete or represent the best practices
of CMake at this time. Please refer to <a class="reference external" href="https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html">CMake‚Äôs documentation</a>
if you have any doubts or want more in depth information.</p>
<p>In order to debug remote targets running different architectures than your
host, you will need to compile LLDB (or at least the server component
<code class="docutils literal notranslate"><span class="pre">lldb-server</span></code>) for the target. While the easiest solution is to compile it
locally on the target, this is often not feasible, and in these cases you will
need to cross-compile LLDB on your host.</p>
<p>Cross-compilation is often a daunting task and has a lot of quirks which depend
on the exact host and target architectures, so it is not possible to give a
universal guide which will work on all platforms. However, here we try to
provide an overview of the cross-compilation process along with the main things
you should look out for.</p>
<p>First, you will need a working toolchain which is capable of producing binaries
for the target architecture. Since you already have a checkout of clang and
lldb, you can compile a host version of clang in a separate folder and use
that. Alternatively you can use system clang or even cross-gcc if your
distribution provides such packages (e.g., <code class="docutils literal notranslate"><span class="pre">g++-aarch64-linux-gnu</span></code> on
Ubuntu).</p>
<p>Next, you will need a copy of the required target headers and libraries on your
host. The libraries can be usually obtained by copying from the target machine,
however the headers are often not found there, especially in case of embedded
platforms. In this case, you will need to obtain them from another source,
either a cross-package if one is available, or cross-compiling the respective
library from source. Fortunately the list of LLDB dependencies is not big and
if you are only interested in the server component, you can reduce this even
further by passing the appropriate cmake options, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">DLLDB_ENABLE_PYTHON</span><span class="o">=</span><span class="mi">0</span>
<span class="o">-</span><span class="n">DLLDB_ENABLE_LIBEDIT</span><span class="o">=</span><span class="mi">0</span>
<span class="o">-</span><span class="n">DLLDB_ENABLE_CURSES</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>(see <a class="reference internal" href="#optional-dependencies"><span class="std std-ref">Optional Dependencies</span></a> for more)</p>
<p>In this case you, will often not need anything other than the standard C and
C++ libraries.</p>
<p>If you find that CMake is finding a version of an optional dependency that
for whatever reason doesn‚Äôt work, consider simply disabling it if you don‚Äôt
know that you need it.</p>
<p>Once all of the dependencies are in place, you need to configure the build
system with the locations and arguments of all the necessary tools.</p>
<p>There are 2 ways to do this depending on your starting point and requirements.</p>
<p>1. If you are starting from scratch and only need the resulting cross compiled
binaries, you can have LLVM build the native tools for you.</p>
<p>2. If you need a host build too, or already have one, you can tell CMake where
that is and it will use those native tools instead.</p>
<p>If you are going to run <code class="docutils literal notranslate"><span class="pre">lldb</span></code> and <code class="docutils literal notranslate"><span class="pre">lldb-server</span></code> only on the target machine,
choose option 1. If you are going to run <code class="docutils literal notranslate"><span class="pre">lldb</span></code> on the host machine and
connect to <code class="docutils literal notranslate"><span class="pre">lldb-server</span></code> on the target, choose option 2.</p>
<p>Either way, the most important cmake options when cross-compiling are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_NAME</span></code> and <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_PROCESSOR</span></code>: This tells CMake what
the build target is and from this it will infer that you are cross compiling.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_C_COMPILER</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_COMPILER</span></code> : C and C++ compilers for the
target architecture.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_C_FLAGS</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS</span></code> : The flags for the C and C++ target
compilers. You may need to specify the exact target cpu and ABI besides the
include paths for the target headers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_EXE_LINKER_FLAGS</span></code> : The flags to be passed to the linker. Usually
this is a list of library search paths referencing the target libraries.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_HOST_TRIPLE</span></code> : The triple of the system that lldb (or lldb-server)
will run on. Not setting this (or setting it incorrectly) can cause a lot of
issues with remote debugging as a lot of the choices lldb makes depend on the
triple reported by the remote platform.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_NATIVE_TOOL_DIR</span></code> (only when using an existing host build): Is a
path to the llvm tools compiled for the host. Any tool that must be run on the
host during a cross build will be configured from this path, so you do not
need to set them all individually. If you are doing a host build only for the
purpose of a cross build, you will need it to include at least
<code class="docutils literal notranslate"><span class="pre">llvm-tblgen</span></code>, <code class="docutils literal notranslate"><span class="pre">clang-tblgen</span></code> and <code class="docutils literal notranslate"><span class="pre">lldb-tblgen</span></code>. Be aware that
the list may grow over time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_LIBRARY_ARCHITECTURE</span></code> : Affects the cmake search path when looking
for libraries. You may need to set this to your architecture triple if you do
not specify all your include and library paths explicitly.</p></li>
</ul>
<p>To find the possible values of the <code class="docutils literal notranslate"><span class="pre">CMAKE_*</span></code> options, please refer to the
CMake documentation.</p>
<p>You can of course also specify the usual cmake options like
<code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code>, etc.</p>
<p>For testing, you may want to set one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LLDB_TEST_COMPILER</span></code> : The compiler used to build programs used
in the test suite. If you are also building clang, this will be used
but if you want to test remotely from the host, you should choose the
cross compiler you are using for the cross build.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLDB_INCLUDE_TESTS=0</span></code> : To disable the tests completely.</p></li>
</ul>
<section id="example-1-cross-compiling-for-linux-arm64-on-ubuntu-host">
<h3>Example 1: Cross-compiling for linux arm64 on Ubuntu host<a class="headerlink" href="#example-1-cross-compiling-for-linux-arm64-on-ubuntu-host" title="Link to this heading">#</a></h3>
<p>Ubuntu already provides the packages necessary to cross-compile LLDB for arm64.
It is sufficient to install packages <code class="docutils literal notranslate"><span class="pre">gcc-aarch64-linux-gnu</span></code>,
<code class="docutils literal notranslate"><span class="pre">g++-aarch64-linux-gnu</span></code>, <code class="docutils literal notranslate"><span class="pre">binutils-aarch64-linux-gnu</span></code>.</p>
<p>Configure as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">monorepo</span><span class="o">&gt;/</span><span class="n">llvm</span><span class="o">-</span><span class="n">project</span><span class="o">/</span><span class="n">llvm</span> <span class="o">-</span><span class="n">G</span> <span class="n">Ninja</span> \
  <span class="o">-</span><span class="n">DCMAKE_BUILD_TYPE</span><span class="o">=</span><span class="n">Release</span> \
  <span class="o">-</span><span class="n">DLLVM_ENABLE_PROJECTS</span><span class="o">=</span><span class="s2">&quot;clang;lld;lldb&quot;</span> \
  <span class="o">-</span><span class="n">DCMAKE_SYSTEM_NAME</span><span class="o">=</span><span class="n">Linux</span> \
  <span class="o">-</span><span class="n">DCMAKE_SYSTEM_PROCESSOR</span><span class="o">=</span><span class="n">AArch64</span> \
  <span class="o">-</span><span class="n">DCMAKE_C_COMPILER</span><span class="o">=</span><span class="n">aarch64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">-</span><span class="n">gcc</span> \
  <span class="o">-</span><span class="n">DCMAKE_CXX_COMPILER</span><span class="o">=</span><span class="n">aarch64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">-</span><span class="n">g</span><span class="o">++</span> \
  <span class="o">-</span><span class="n">DLLVM_HOST_TRIPLE</span><span class="o">=</span><span class="n">aarch64</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span> \
  <span class="o">-</span><span class="n">DLLDB_ENABLE_PYTHON</span><span class="o">=</span><span class="mi">0</span> \
  <span class="o">-</span><span class="n">DLLDB_ENABLE_LIBEDIT</span><span class="o">=</span><span class="mi">0</span> \
  <span class="o">-</span><span class="n">DLLDB_ENABLE_CURSES</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>During this build native tools will be built automatically when they are needed.
The contents of <code class="docutils literal notranslate"><span class="pre">&lt;build</span> <span class="pre">dir&gt;/bin</span></code> will be target binaries as you‚Äôd expect.
AArch64 binaries in this case.</p>
</section>
<section id="example-2-cross-compiling-for-linux-arm64-on-ubuntu-host-using-an-existing-host-build">
<h3>Example 2: Cross-compiling for linux arm64 on Ubuntu host using an existing host build<a class="headerlink" href="#example-2-cross-compiling-for-linux-arm64-on-ubuntu-host-using-an-existing-host-build" title="Link to this heading">#</a></h3>
<p>This build requires an existing host build that includes the required native
tools. Install the compiler as in example 1 then run CMake as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">monorepo</span><span class="o">&gt;/</span><span class="n">llvm</span><span class="o">-</span><span class="n">project</span><span class="o">/</span><span class="n">llvm</span> <span class="o">-</span><span class="n">G</span> <span class="n">Ninja</span> \
  <span class="o">-</span><span class="n">DCMAKE_BUILD_TYPE</span><span class="o">=</span><span class="n">Release</span> \
  <span class="o">-</span><span class="n">DLLVM_ENABLE_PROJECTS</span><span class="o">=</span><span class="s2">&quot;clang;lld;lldb&quot;</span> \
  <span class="o">-</span><span class="n">DCMAKE_SYSTEM_NAME</span><span class="o">=</span><span class="n">Linux</span> \
  <span class="o">-</span><span class="n">DCMAKE_SYSTEM_PROCESSOR</span><span class="o">=</span><span class="n">AArch64</span> \
  <span class="o">-</span><span class="n">DCMAKE_C_COMPILER</span><span class="o">=</span><span class="n">aarch64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">-</span><span class="n">gcc</span> \
  <span class="o">-</span><span class="n">DCMAKE_CXX_COMPILER</span><span class="o">=</span><span class="n">aarch64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">-</span><span class="n">g</span><span class="o">++</span> \
  <span class="o">-</span><span class="n">DLLVM_HOST_TRIPLE</span><span class="o">=</span><span class="n">aarch64</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span> \
  <span class="o">-</span><span class="n">DLLVM_NATIVE_TOOL_DIR</span><span class="o">=&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">host</span><span class="o">&gt;/</span><span class="nb">bin</span><span class="o">/</span> \
  <span class="o">-</span><span class="n">DLLDB_ENABLE_PYTHON</span><span class="o">=</span><span class="mi">0</span> \
  <span class="o">-</span><span class="n">DLLDB_ENABLE_LIBEDIT</span><span class="o">=</span><span class="mi">0</span> \
  <span class="o">-</span><span class="n">DLLDB_ENABLE_CURSES</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>The only difference from example 1 is the addition of
<code class="docutils literal notranslate"><span class="pre">DLLVM_NATIVE_TOOL_DIR</span></code> pointing to your existing host build.</p>
<p>An alternative (and recommended) way to compile LLDB is with clang.
Unfortunately, clang is not able to find all the include paths necessary for a
successful cross-compile, so we need to help it with a couple of CFLAGS
options. In my case it was sufficient to add the following arguments to
<code class="docutils literal notranslate"><span class="pre">CMAKE_C_FLAGS</span></code> and <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS</span></code> (in addition to changing
<code class="docutils literal notranslate"><span class="pre">CMAKE_C(XX)_COMPILER</span></code> to point to clang compilers):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">target</span> <span class="n">aarch64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span> \
<span class="o">-</span><span class="n">I</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">aarch64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">c</span><span class="o">++/</span><span class="mf">4.8.2</span><span class="o">/</span><span class="n">aarch64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span> \
<span class="o">-</span><span class="n">I</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">aarch64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">include</span>
</pre></div>
</div>
<p>If you wanted to build a full version of LLDB and avoid passing
<code class="docutils literal notranslate"><span class="pre">-DLLDB_ENABLE_PYTHON=0</span></code> and other options, you would need to obtain the
target versions of the respective libraries. The easiest way to achieve this is
to use the qemu-debootstrap utility, which can prepare a system image using
qemu and chroot to simulate the target environment. Then you can install the
necessary packages in this environment (python-dev, libedit-dev, etc.) and
point your compiler to use them using the correct -I and -L arguments.</p>
</section>
<section id="example-3-cross-compiling-for-android-on-linux">
<h3>Example 3: Cross-compiling for Android on Linux<a class="headerlink" href="#example-3-cross-compiling-for-android-on-linux" title="Link to this heading">#</a></h3>
<p>In the case of Android, the toolchain and all required headers and libraries
are available in the Android NDK.</p>
<p>The NDK also contains a cmake toolchain file, which makes configuring the build
much simpler. The compiler, include and library paths will be configured by the
toolchain file and all you need to do is to select the architecture
(ANDROID_ABI) and platform level (<code class="docutils literal notranslate"><span class="pre">ANDROID_PLATFORM</span></code>, should be at least 21).
You will also need to set <code class="docutils literal notranslate"><span class="pre">ANDROID_ALLOW_UNDEFINED_SYMBOLS=On</span></code>, as the
toolchain file defaults to ‚Äúno undefined symbols in shared libraries‚Äù, which is
not compatible with some llvm libraries. The first version of NDK which
supports this approach is r14.</p>
<p>For example, the following arguments are sufficient to configure an android
arm64 build:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-DCMAKE_TOOLCHAIN_FILE=$ANDROID_NDK_HOME/build/cmake/android.toolchain.cmake \
-DANDROID_ABI=arm64-v8a \
-DANDROID_PLATFORM=android-21 \
-DANDROID_ALLOW_UNDEFINED_SYMBOLS=On \
-DLLVM_HOST_TRIPLE=aarch64-unknown-linux-android \
-DCROSS_TOOLCHAIN_FLAGS_NATIVE=&#39;-DCMAKE_C_COMPILER=cc;-DCMAKE_CXX_COMPILER=c++&#39;
</pre></div>
</div>
<p>Note that currently only lldb-server is functional on android. The lldb client
is not supported and unlikely to work.</p>
</section>
</section>
<section id="verifying-python-support">
<h2>Verifying Python Support<a class="headerlink" href="#verifying-python-support" title="Link to this heading">#</a></h2>
<p>LLDB has a Python scripting capability and supplies its own Python module named
lldb. If a script is run inside the command line lldb application, the Python
module is made available automatically. However, if a script is to be run by a
Python interpreter outside the command line application, the <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>
environment variable can be used to let the Python interpreter find the lldb
module.</p>
<p>The correct path can be obtained by invoking the command line lldb tool with
the -P flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export PYTHONPATH=`$llvm/build/Debug+Asserts/bin/lldb -P`
</pre></div>
</div>
<p>If you used a different build directory or made a release build, you may need
to adjust the above to suit your needs. To test that the lldb Python module is
built correctly and is available to the default Python interpreter, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -c &#39;import lldb&#39;
</pre></div>
</div>
<p>Make sure you‚Äôre using the Python interpreter that matches the Python library
you linked against. For more details please refer to the <a class="reference internal" href="caveats.html#python-caveat"><span class="std std-ref">caveats</span></a>.</p>
</section>
<section id="code-signing-on-macos">
<span id="codesigning"></span><h2>Code Signing on macOS<a class="headerlink" href="#code-signing-on-macos" title="Link to this heading">#</a></h2>
<p>To use the in-tree debug server on macOS, lldb needs to be code signed. The
Debug, DebugClang and Release builds are set to code sign using a code signing
certificate named <code class="docutils literal notranslate"><span class="pre">lldb_codesign</span></code>.</p>
<p>Automatic setup, run:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scripts/macos-setup-codesign.sh</span></code></p></li>
</ul>
<p>Note that it‚Äôs possible to build and use lldb on macOS without setting up code
signing by using the system‚Äôs debug server. To configure lldb in this way with
cmake, specify <code class="docutils literal notranslate"><span class="pre">-DLLDB_USE_SYSTEM_DEBUGSERVER=ON</span></code>.</p>
<p>If you have re-installed a new OS, please delete all old <code class="docutils literal notranslate"><span class="pre">lldb_codesign</span></code> items
from your keychain. There will be a code signing certification and a public
and private key. Reboot after deleting them. You will also need to delete and
build folders that contained old signed items. The darwin kernel will cache
code signing using the executable‚Äôs file system node, so you will need to
delete the file so the kernel clears its cache.</p>
<p>When you build your LLDB for the first time, the Xcode GUI will prompt you for
permission to use the <code class="docutils literal notranslate"><span class="pre">lldb_codesign</span></code> keychain. Be sure to click ‚ÄúAlways
Allow‚Äù on your first build. From here on out, the <code class="docutils literal notranslate"><span class="pre">lldb_codesign</span></code> will be
trusted and you can build from the command line without having to authorize.
Also the first time you debug using a LLDB that was built with this code
signing certificate, you will need to authenticate once.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="test.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Testing</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="contributing.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Contributing</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2007-2025, The LLDB Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Aug 13, 2025</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Building</a><ul>
<li><a class="reference internal" href="#getting-the-sources">Getting the Sources</a></li>
<li><a class="reference internal" href="#preliminaries">Preliminaries</a><ul>
<li><a class="reference internal" href="#optional-dependencies">Optional Dependencies</a></li>
<li><a class="reference internal" href="#windows">Windows</a></li>
<li><a class="reference internal" href="#macos">macOS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-lldb-with-cmake">Building LLDB with CMake</a><ul>
<li><a class="reference internal" href="#regular-in-tree-builds">Regular in-tree builds</a></li>
<li><a class="reference internal" href="#standalone-builds">Standalone builds</a></li>
<li><a class="reference internal" href="#common-cmake-options">Common CMake options</a><ul>
<li><a class="reference internal" href="#id2">Windows</a></li>
<li><a class="reference internal" href="#id3">macOS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cmake-caches">CMake caches</a><ul>
<li><a class="reference internal" href="#common-configurations-on-macos">Common configurations on macOS</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#building-the-documentation">Building the Documentation</a></li>
<li><a class="reference internal" href="#cross-compiling-lldb">Cross-compiling LLDB</a><ul>
<li><a class="reference internal" href="#example-1-cross-compiling-for-linux-arm64-on-ubuntu-host">Example 1: Cross-compiling for linux arm64 on Ubuntu host</a></li>
<li><a class="reference internal" href="#example-2-cross-compiling-for-linux-arm64-on-ubuntu-host-using-an-existing-host-build">Example 2: Cross-compiling for linux arm64 on Ubuntu host using an existing host build</a></li>
<li><a class="reference internal" href="#example-3-cross-compiling-for-android-on-linux">Example 3: Cross-compiling for Android on Linux</a></li>
</ul>
</li>
<li><a class="reference internal" href="#verifying-python-support">Verifying Python Support</a></li>
<li><a class="reference internal" href="#code-signing-on-macos">Code Signing on macOS</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=7f41d439"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    </body>
</html>